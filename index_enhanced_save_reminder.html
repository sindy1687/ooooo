<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸš€ å¤ªç©ºè‹±èªå†’éšª - å¢å¼·ç‰ˆå­˜æª”æé†’</title>
  <link rel="stylesheet" href="responsive_enhanced.css">
  <link rel="stylesheet" href="css/saveReminderAnimations.css">
  <!-- å…¶ä»–ç¾æœ‰çš„ CSS å¼•å…¥ -->
</head>
<body>
  <div id="container">
    <!-- ç¾æœ‰çš„é é¢å…§å®¹ -->
    <div class="header">
      <h1 class="title">ğŸš€ å¤ªç©ºè‹±èªå†’éšª</h1>
      <p class="subtitle">æ¢ç´¢å®‡å®™ï¼Œå­¸ç¿’è‹±èªï¼</p>
    </div>

    <!-- å¢å¼·ç‰ˆå­˜æª”æé†’å€åŸŸ -->
    <div id="saveReminder" style="display: none;">
      <!-- å…§å®¹å°‡ç”±å¢å¼·ç‰ˆç³»çµ±å‹•æ…‹ç”Ÿæˆ -->
    </div>

    <!-- ç©å®¶è³‡è¨Šå€åŸŸ -->
    <div class="player-info">
      <input type="text" id="playerName" placeholder="è¼¸å…¥æ‚¨çš„å¤ªç©ºäººåç¨±">
      <div class="avatar-grid">
        <!-- é ­åƒé¸é … -->
        <div class="avatar-option" style="background-image: url('img/avatars/avatar_astro1.png');" onclick="selectAvatar(this, 'img/avatars/avatar_astro1.png')"></div>
        <!-- å…¶ä»–é ­åƒé¸é …... -->
      </div>
    </div>

    <!-- ä¸»è¦éŠæˆ²æŒ‰éˆ• -->
    <div class="main-buttons">
      <button class="btn" onclick="startAdventure()">ğŸš€ é–‹å§‹å†’éšª</button>
      <button class="btn" onclick="openVocabularyBook()">ğŸ“š å–®å­—æœ¬</button>
      <button class="btn" onclick="openGrammarTower()">ğŸ›ï¸ æ–‡æ³•å¡”</button>
      <button class="btn" onclick="openShop()">ğŸ›’ å•†åŸ</button>
      <button class="btn" onclick="openGacha()">ğŸ² æŠ½å¡</button>
    </div>

    <!-- å°èˆªæŒ‰éˆ• -->
    <div class="nav-buttons">
      <button class="nav-btn" onclick="openCards()">ğŸ“ å¡ç‰‡æ”¶è—</button>
      <button class="nav-btn" onclick="openAchievements()">ğŸ† æˆå°±å‹³ç« </button>
      <button class="nav-btn" onclick="openAutoSaveManager()">ğŸ’¾ è‡ªå‹•å„²å­˜</button>
    </div>
  </div>

  <!-- ç¾æœ‰çš„è…³æœ¬å¼•å…¥ -->
  <script src="js/userData.js"></script>
  <script src="js/autoSaveSystem.js"></script>
  <script src="js/achievementSystem.js"></script>
  <script src="js/characterDialogue.js"></script>
  <script src="js/cards.js"></script>
  
  <!-- æ–°å¢ï¼šå¢å¼·ç‰ˆå­˜æª”æé†’ç³»çµ± -->
  <script src="js/enhancedSaveReminder.js"></script>

  <script>
    // ç¾æœ‰çš„éŠæˆ²é‚è¼¯ä¿æŒä¸è®Š
    console.log('=== JavaScripté–‹å§‹åŸ·è¡Œ ===');
    
    // å¢å¼·ç‰ˆå­˜æª”æé†’ç³»çµ±æ•´åˆ
    function integrateEnhancedSaveReminder() {
      // åœ¨é‡è¦æ“ä½œä¸­è¨˜éŒ„æ´»å‹•
      
      // é–‹å§‹å†’éšªæ™‚è¨˜éŒ„
      window.startAdventure = function() {
        window.recordImportantAction('adventure_start', 'é–‹å§‹å†’éšª');
        location.href = 'atlas.html';
      };
      
      // é–‹å•Ÿå–®å­—æœ¬æ™‚è¨˜éŒ„
      window.openVocabularyBook = function() {
        window.recordImportantAction('vocabulary_access', 'é–‹å•Ÿå–®å­—æœ¬');
        location.href = 'book.html';
      };
      
      // é–‹å•Ÿæ–‡æ³•å¡”æ™‚è¨˜éŒ„
      window.openGrammarTower = function() {
        window.recordImportantAction('grammar_access', 'é–‹å•Ÿæ–‡æ³•å¡”');
        location.href = 'grammar_tower_select.html';
      };
      
      // é–‹å•Ÿå•†åŸæ™‚è¨˜éŒ„
      window.openShop = function() {
        window.recordImportantAction('shop_access', 'é–‹å•Ÿå•†åŸ');
        location.href = 'shop.html';
      };
      
      // é–‹å•ŸæŠ½å¡æ™‚è¨˜éŒ„
      window.openGacha = function() {
        window.recordImportantAction('gacha_access', 'é–‹å•ŸæŠ½å¡');
        location.href = 'gacha.html';
      };
      
      // é–‹å•Ÿå¡ç‰‡æ”¶è—æ™‚è¨˜éŒ„
      window.openCards = function() {
        window.recordImportantAction('cards_access', 'é–‹å•Ÿå¡ç‰‡æ”¶è—');
        location.href = 'cards.html';
      };
      
      // é–‹å•Ÿæˆå°±ç³»çµ±æ™‚è¨˜éŒ„
      window.openAchievements = function() {
        window.recordImportantAction('achievements_access', 'é–‹å•Ÿæˆå°±ç³»çµ±');
        location.href = 'achievement.html';
      };
      
      // é–‹å•Ÿè‡ªå‹•å„²å­˜ç®¡ç†å™¨
      window.openAutoSaveManager = function() {
        window.open('autoSaveManager.html', '_blank');
      };
    }
    
    // é ­åƒé¸æ“‡æ™‚è¨˜éŒ„é‡è¦æ“ä½œ
    function selectAvatar(element, avatarPath) {
      // ç¾æœ‰çš„é ­åƒé¸æ“‡é‚è¼¯...
      document.querySelectorAll('.avatar-option').forEach(avatar => {
        avatar.classList.remove('selected');
      });
      element.classList.add('selected');
      
      // è¨˜éŒ„é‡è¦æ“ä½œ
      window.recordImportantAction('avatar_change', 'æ›´æ›é ­åƒ');
      
      // å…¶ä»–ç¾æœ‰é‚è¼¯...
    }
    
    // ç©å®¶åç¨±è¼¸å…¥æ™‚è¨˜éŒ„
    document.getElementById('playerName').addEventListener('input', function(e) {
      const name = e.target.value.trim();
      if (name) {
        LinkageSystem.player.setName(name);
        // è¨˜éŒ„é‡è¦æ“ä½œ
        window.recordImportantAction('name_change', 'æ›´æ”¹ç©å®¶åç¨±');
      }
    });
    
    // é é¢è¼‰å…¥æ™‚çš„åˆå§‹åŒ–
    window.addEventListener('load', function() {
      console.log('ğŸ”” å¢å¼·ç‰ˆå­˜æª”æé†’ç³»çµ±æ•´åˆå®Œæˆ');
      
      // æ•´åˆå¢å¼·ç‰ˆå­˜æª”æé†’ç³»çµ±
      integrateEnhancedSaveReminder();
      
      // è¼‰å…¥ä½¿ç”¨è€…åç¨±å’Œé ­åƒ
      LinkageSystem.player.updateDisplay();
      
      // ç¾æœ‰çš„åˆå§‹åŒ–é‚è¼¯...
      const savedAvatar = localStorage.getItem('selectedAvatar');
      if (savedAvatar) {
        // æ¢å¾©é ­åƒé¸æ“‡é‚è¼¯...
      }
      
      // æª¢æŸ¥æ˜¯å¦ç‚ºé¦–æ¬¡è¨ªå•
      const hasShownWelcome = localStorage.getItem('hasShownWelcomeDialogue');
      if (!hasShownWelcome && window.CharacterDialogue) {
        setTimeout(() => {
          window.CharacterDialogue.showWelcomeDialogue();
          localStorage.setItem('hasShownWelcomeDialogue', 'true');
        }, 2000);
      }
      
      // æ³¨æ„ï¼šä¸å†éœ€è¦å•Ÿå‹•èˆŠçš„å­˜æª”æé†’ç³»çµ±
      // startSaveReminderCheck(); // é€™è¡Œè¢«å¢å¼·ç‰ˆç³»çµ±å–ä»£
    });
    
    // æˆå°±ç³»çµ±æ•´åˆ
    function updateAchievementBadge() {
      // ç¾æœ‰çš„æˆå°±æ›´æ–°é‚è¼¯...
      // ç•¶ç²å¾—æˆå°±æ™‚è¨˜éŒ„é‡è¦æ“ä½œ
      window.recordImportantAction('achievement_progress', 'æˆå°±é€²åº¦æ›´æ–°');
    }
    
    // æ¯æ—¥ç°½åˆ°æ•´åˆ
    function checkDailyReward() {
      // ç¾æœ‰çš„æ¯æ—¥ç°½åˆ°é‚è¼¯...
      // ç•¶ç²å¾—æ¯æ—¥çå‹µæ™‚è¨˜éŒ„é‡è¦æ“ä½œ
      window.recordImportantAction('daily_reward', 'ç²å¾—æ¯æ—¥çå‹µ');
    }
    
    // æ˜Ÿæ˜Ÿç³»çµ±æ•´åˆ
    function updateStarsDisplay() {
      LinkageSystem.stars.updateDisplay();
      // ç•¶æ˜Ÿæ˜Ÿæ•¸é‡è®ŠåŒ–æ™‚è¨˜éŒ„é‡è¦æ“ä½œ
      window.recordImportantAction('stars_change', 'æ˜Ÿæ˜Ÿæ•¸é‡è®ŠåŒ–');
    }
    
    // éŸ³æ¨‚æ§åˆ¶ï¼ˆä¿æŒç¾æœ‰åŠŸèƒ½ï¼‰
    const backgroundMusic = document.getElementById('backgroundMusic');
    const toggleMusicBtn = document.getElementById('toggleMusic');
    let isMusicPlaying = LinkageSystem.music.isPlaying();
    
    // å…¶ä»–ç¾æœ‰çš„JavaScripté‚è¼¯ä¿æŒä¸è®Š...
  </script>
</body>
</html> 