<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé∞ ÊãâÈú∏Ê©üÈÅäÊà≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
            overflow-y: auto;
            overflow-x: auto;
        }

        .slot-machine-container {
            background: linear-gradient(145deg, #2a2a3e, #1a1a2e);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 3px solid #ffd700;
            position: relative;
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
        }

        .slot-machine-container::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700);
            border-radius: 25px;
            z-index: -1;
            animation: borderGlow 2s ease-in-out infinite alternate;
        }

        @keyframes borderGlow {
            0% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .machine-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .machine-title {
            font-size: 2.5em;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            margin-bottom: 10px;
        }

        .machine-subtitle {
            font-size: 1.2em;
            color: #ccc;
            opacity: 0.8;
        }

        .slot-display {
            background: #000;
            border: 5px solid #333;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .slot-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            animation: slotShine 3s ease-in-out infinite;
        }

        @keyframes slotShine {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        .slot-reels {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            height: 200px;
        }

        .slot-reel {
            flex: 1;
            background: linear-gradient(180deg, #333, #000);
            border: 3px solid #555;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .reel-strip {
            display: flex;
            flex-direction: column;
            transition: transform 0.1s ease-out;
            position: relative;
        }

        .reel-item {
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            border-bottom: 1px solid #333;
            flex-shrink: 0;
        }

        .reel-item img {
            max-width: 100%;
            max-height: 100%;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
        }

        .reel-item.symbol {
            font-size: 3em;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .controls {
            text-align: center;
            margin: 30px 0;
        }

        .spin-button {
            background: linear-gradient(145deg, #ffd700, #ffed4e);
            border: none;
            padding: 15px 40px;
            font-size: 1.5em;
            font-weight: bold;
            color: #000;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .spin-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .bet-multipliers {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .bet-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .bet-btn:hover {
            background: linear-gradient(135deg, #764ba2, #667eea);
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .all-in-button {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(135deg, #ff4757, #ff3742);
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            width: 100%;
            max-width: 300px;
        }

        .all-in-button:hover {
            background: linear-gradient(135deg, #ff3742, #ff4757);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.4);
        }

        .normal-spin-button {
            padding: 12px 25px;
            border: none;
            border-radius: 20px;
            background: linear-gradient(135deg, #2ed573, #1e90ff);
            color: white;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .normal-spin-button:hover {
            background: linear-gradient(135deg, #1e90ff, #2ed573);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 213, 115, 0.4);
        }

        /* Â§ßÁçéÂΩàÁ™óÊ®£Âºè - ÁæéÂåñÁâà */
        .jackpot-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.9), rgba(255, 237, 78, 0.9));
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(15px);
            animation: modalFadeIn 0.6s ease-out;
        }

        .jackpot-content {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border: 4px solid #ffd700;
            border-radius: 30px;
            padding: 50px 40px;
            text-align: center;
            max-width: 550px;
            width: 90%;
            box-shadow: 
                0 25px 80px rgba(255, 215, 0, 0.4),
                0 0 0 20px rgba(255, 215, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            animation: jackpotBounce 1.2s ease-out;
            position: relative;
            overflow: hidden;
        }

        .jackpot-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        .jackpot-title {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, #ff6b35, #f7931e, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 2;
        }

        .jackpot-amount {
            font-size: 3.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #ff4757, #ff6b35, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 25px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 2;
        }

        .jackpot-symbol {
            font-size: 5rem;
            margin: 25px 0;
            animation: symbolGlow 1.2s ease-in-out infinite alternate;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            position: relative;
            z-index: 2;
        }

        .jackpot-message {
            font-size: 1.3rem;
            color: #2f3542;
            margin: 25px 0;
            line-height: 1.6;
            position: relative;
            z-index: 2;
        }

        .jackpot-close {
            background: linear-gradient(135deg, #ff6b35, #ff4757);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 25px;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 25px;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.3);
        }

        .jackpot-close:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 107, 53, 0.5);
        }

        .jackpot-close:active {
            transform: translateY(-1px);
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes jackpotBounce {
            0% { transform: scale(0.3) rotate(-10deg); opacity: 0; }
            50% { transform: scale(1.1) rotate(5deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        @keyframes symbolGlow {
            0% { 
                text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
                transform: scale(1);
            }
            50% {
                text-shadow: 0 0 40px rgba(255, 215, 0, 1), 0 0 60px rgba(255, 215, 0, 0.5);
                transform: scale(1.1);
            }
            100% { 
                text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
                transform: scale(1);
            }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .bet-btn.active {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }

        .spin-button:hover::before {
            left: 100%;
        }

        .spin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
        }

        .spin-button:active {
            transform: translateY(0);
        }

        .spin-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .info-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .info-label {
            font-size: 0.9em;
            color: #ccc;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #ffd700;
        }

        .result-display {
            text-align: center;
            margin: 15px 0;
            min-height: 50px;
            padding: 10px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .result-text {
            font-size: 1.1em;
            font-weight: bold;
            padding: 8px 16px;
            border-radius: 8px;
            display: inline-block;
            animation: resultPulse 0.5s ease-in-out;
            margin: 0;
        }

        .result-text.win {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
        }

        .result-text.lose {
            background: linear-gradient(145deg, #f44336, #d32f2f);
            color: white;
            box-shadow: 0 0 20px rgba(244, 67, 54, 0.5);
        }

        @keyframes resultPulse {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .jackpot {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4em;
            color: #ffd700;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
            animation: jackpotGlow 0.5s ease-in-out infinite alternate;
            z-index: 100;
        }

        @keyframes jackpotGlow {
            0% { text-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
            100% { text-shadow: 0 0 50px rgba(255, 215, 0, 1), 0 0 70px rgba(255, 215, 0, 0.5); }
        }

        .coin-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 15px;
            border-radius: 20px;
            border: 2px solid #ffd700;
        }

        .coin-amount {
            font-size: 1.2em;
            font-weight: bold;
            color: #ffd700;
        }

        .star-display {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 15px;
            border-radius: 20px;
            border: 2px solid #ffd700;
        }

        .star-amount {
            font-size: 1.2em;
            font-weight: bold;
            color: #ffd700;
        }

        .exchange-button {
            background: linear-gradient(145deg, #a259ff, #7c3aed);
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(162, 89, 255, 0.3);
        }

        .exchange-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(162, 89, 255, 0.4);
        }

        @media (max-width: 768px) {
            .slot-machine-container {
                margin: 20px;
                padding: 20px;
            }

            .machine-title {
                font-size: 2em;
            }

            .slot-reels {
                height: 150px;
            }

            .reel-item {
                height: 150px;
            }

            .spin-button {
                padding: 12px 30px;
                font-size: 1.2em;
            }
        }

        .win-animation {
            animation: winShake 0.5s ease-in-out;
        }

        @keyframes winShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* ÂÖåÊèõÂïÜÂüéÊ®£Âºè - ÊâãÊ©üÈäÄË°åÈ¢®Ê†º */
        .exchange-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .exchange-content {
            background: white;
            border-radius: 25px;
            padding: 0;
            max-width: 400px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .bank-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px 20px;
            border-radius: 25px 25px 0 0;
            text-align: center;
            position: relative;
        }

        .bank-header::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }

        .exchange-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0;
        }

        .bank-balance {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            margin: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .balance-title {
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 10px;
            text-align: center;
        }

        .balance-amount {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 5px;
        }

        .balance-label {
            font-size: 0.8rem;
            color: #6c757d;
            text-align: center;
        }

        .bank-section {
            padding: 0 20px 20px;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }

        .bank-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .bank-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 15px 10px;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }

        .bank-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
        }

        .bank-btn:active {
            transform: translateY(0);
        }

        .bank-close {
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px;
            width: calc(100% - 40px);
            font-size: 1rem;
        }

        .bank-close:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(108, 117, 125, 0.4);
        }

        .bank-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #dee2e6, transparent);
            margin: 20px 0;
        }

        .no-coins-hint {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            animation: pulse 2s infinite;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .symbol-guide {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        .symbol-guide h3 {
            color: #ffd700;
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.2rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .symbol-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .symbol-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            transition: all 0.3s ease;
        }

        .symbol-item:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }

        .symbol-item .symbol {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .symbol-item .reward {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.1rem;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
        }

        .symbol-item .description {
            color: #cccccc;
            font-size: 0.9rem;
            text-align: right;
        }

        .help-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 0;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .help-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .help-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }

        .help-content {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border: 3px solid #667eea;
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
        }

        .help-title {
            color: #667eea;
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
        }

        .help-section {
            margin: 20px 0;
        }

        .help-section h3 {
            color: #2c3e50;
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .help-section p {
            color: #34495e;
            line-height: 1.6;
            margin: 5px 0;
        }

        .help-close {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            width: 100%;
        }

        .help-close:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Ëá™ÂãïËΩâÂãïÈù¢ÊùøÊ®£Âºè */
        .auto-spin-panel {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        .auto-spin-header h3 {
            color: #ffd700;
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.2rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .auto-spin-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .auto-spin-input {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .auto-spin-input label {
            color: #ccc;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .auto-input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .auto-input:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        .auto-spin-buttons {
            grid-column: 1 / -1;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .auto-spin-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }

        .auto-spin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
        }

        .auto-spin-btn.stop {
            background: linear-gradient(135deg, #dc3545, #c82333);
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
        }

        .auto-spin-btn.stop:hover {
            box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
        }

        .auto-spin-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .auto-spin-status {
            text-align: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .auto-spin-status span {
            color: #ffd700;
            font-weight: bold;
            font-size: 1rem;
        }

        .auto-spin-status.running span {
            animation: pulse 1s infinite;
        }

        .sound-options {
            display: flex;
            gap: 10px;
        }

        .sound-option {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #ccc;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .sound-option input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #ffd700;
        }

        .sound-option span {
            color: #ccc;
            font-size: 0.9rem;
        }

        /* ÊªëÊ°øÊ®£Âºè */
        .slider-container {
            margin-top: 10px;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(90deg, #ffd700 0%, #ffd700 50%, rgba(255, 215, 0, 0.3) 50%, rgba(255, 215, 0, 0.3) 100%);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border: 2px solid #fff;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.6);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border: 2px solid #fff;
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .slider::-moz-range-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.6);
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.8rem;
            color: #ccc;
        }

        .slider-labels span {
            font-weight: bold;
        }

        .auto-spin-input label {
            color: #ccc;
            font-size: 0.9rem;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .auto-spin-input label span {
            color: #ffd700;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
        }

        /* Ëá™ÂÆöÁæ©ÊªæÂãïÊ¢ùÊ®£Âºè */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            cursor: pointer;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #ffd700, #ffed4e);
            border-radius: 6px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            min-height: 20px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #ffed4e, #ffd700);
        }

        ::-webkit-scrollbar-thumb:active {
            background: linear-gradient(180deg, #ffb700, #ffd700);
        }

        ::-webkit-scrollbar-corner {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Firefox ÊªæÂãïÊ¢ùÊ®£Âºè */
        * {
            scrollbar-width: thin;
            scrollbar-color: #ffd700 rgba(255, 255, 255, 0.1);
        }

        /* Á¢∫‰øùÈ†ÅÈù¢ÂèØ‰ª•ÊªæÂãï */
        html, body {
            overflow-y: auto;
            overflow-x: auto;
        }

        /* Ê∑ªÂä†‰∏Ä‰∫õÂ∫ïÈÉ®Á©∫Èñì‰æÜÊ∏¨Ë©¶ÊªæÂãï */
        .slot-machine-container::after {
            content: '';
            display: block;
            height: 100px;
        }

        @media (max-width: 768px) {
            .auto-spin-controls {
                grid-template-columns: 1fr;
            }
            
            .auto-spin-buttons {
                flex-direction: column;
            }

            .button-container {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .help-button,
            .exchange-button {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="slot-machine-container">
        <div class="star-display">
            <span class="star-amount">‚≠ê <span id="stars">0</span></span>
        </div>

        <div class="coin-display">
            <span class="coin-amount">ü™ô <span id="coins">0</span></span>
        </div>

        <div class="machine-header">
            <h1 class="machine-title">üé∞ ÊãâÈú∏Ê©ü</h1>
            <p class="machine-subtitle">ËΩâÂá∫‰∏âÂÄãÁõ∏ÂêåÁ¨¶ËôüÂç≥ÂèØÁç≤ÂãùÔºÅ</p>
        </div>

        <div class="button-container">
            <button class="help-button" id="helpBtn" onclick="showHelpModal()">
                ‚ùì ÈÅäÊà≤Ë™™Êòé
            </button>
            <button class="exchange-button" id="exchangeBtn">‚≠êü™ô ÂÖåÊèõÂïÜÂüé</button>
        </div>

        <div class="no-coins-hint" id="noCoinsHint" style="display: none;">
            üí° Ê≤íÊúâÈáëÂπ£‰∫ÜÂóéÔºüÈªûÊìäÂÖåÊèõÂïÜÂüéÁî®ÊòüÊòüÊèõÈáëÂπ£ÔºÅ
        </div>

        <div class="slot-display">
            <div class="slot-reels">
                <div class="slot-reel" id="reel1">
                    <div class="reel-strip" id="strip1">
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçé" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçä" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçá" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçì" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçå" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçé" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçä" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçá" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçì" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçå" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                    </div>
                </div>
                <div class="slot-reel" id="reel2">
                    <div class="reel-strip" id="strip2">
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçé" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçä" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçá" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçì" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçå" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçé" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçä" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçá" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçì" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçå" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                    </div>
                </div>
                <div class="slot-reel" id="reel3">
                    <div class="reel-strip" id="strip3">
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçé" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçä" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçá" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçì" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçå" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçé" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçä" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçá" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçì" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                        <div class="reel-item symbol">
                            <img src="https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg" alt="üçå" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <div class="result-display" id="resultDisplay">
                <div class="result-text" id="resultText"></div>
            </div>
            
            <button class="all-in-button" id="allInButton" onclick="spinAllIn()">
                üé∞ Ë≥≠‰∏äÊâÄÊúâÈáëÂπ£
            </button>
            <div class="bet-multipliers">
                <button class="bet-btn active" data-multiplier="1">1ÂÄç (5,000ü™ô)</button>
                <button class="bet-btn" data-multiplier="2">2ÂÄç (10,000ü™ô)</button>
                <button class="bet-btn" data-multiplier="4">4ÂÄç (20,000ü™ô)</button>
                <button class="bet-btn" data-multiplier="6">6ÂÄç (30,000ü™ô)</button>
                <button class="bet-btn" data-multiplier="10">10ÂÄç (50,000ü™ô)</button>
            </div>
            <button class="normal-spin-button" id="normalSpinButton" onclick="spinNormal()">
                üé∞ ‰∏ÄËà¨‰∏ãÊ≥® (5,000ü™ô)
            </button>
            
            <!-- Ëá™ÂãïËΩâÂãïÊéßÂà∂Èù¢Êùø -->
            <div class="auto-spin-panel">
                <div class="auto-spin-header">
                    <h3>ü§ñ Ëá™ÂãïËΩâÂãï</h3>
                </div>
                <div class="auto-spin-controls">
                    <div class="auto-spin-input">
                        <label>ËΩâÂãïÊ¨°Êï∏Ôºö<span id="spinCountValue">10</span></label>
                        <div class="slider-container">
                            <input type="range" id="autoSpinCountSlider" min="1" max="100" value="10" class="slider">
                            <div class="slider-labels">
                                <span>1</span>
                                <span>50</span>
                                <span>100</span>
                            </div>
                        </div>
                    </div>
                    <div class="auto-spin-input">
                        <label>ÈñìÈöîÊôÇÈñìÔºö<span id="intervalValue">10</span>Áßí</label>
                        <div class="slider-container">
                            <input type="range" id="autoSpinIntervalSlider" min="10" max="60" value="10" class="slider">
                            <div class="slider-labels">
                                <span>10s</span>
                                <span>35s</span>
                                <span>60s</span>
                            </div>
                        </div>
                    </div>
                    <div class="auto-spin-input">
                        <label>Èü≥ÊïàË®≠ÂÆöÔºö</label>
                        <div class="sound-options">
                            <label class="sound-option">
                                <input type="checkbox" id="autoSpinSound" checked>
                                <span>Êí≠ÊîæÈü≥Êïà</span>
                            </label>
                        </div>
                    </div>
                    <div class="auto-spin-buttons">
                        <button class="auto-spin-btn" id="startAutoSpinBtn" onclick="startAutoSpin()">
                            ‚ñ∂Ô∏è ÈñãÂßãËá™ÂãïËΩâÂãï
                        </button>
                        <button class="auto-spin-btn stop" id="stopAutoSpinBtn" onclick="stopAutoSpin()" style="display: none;">
                            ‚èπÔ∏è ÂÅúÊ≠¢Ëá™ÂãïËΩâÂãï
                        </button>
                    </div>
                </div>
                <div class="auto-spin-status" id="autoSpinStatus">
                    <span id="autoSpinProgress">Ê∫ñÂÇôÂ∞±Á∑í</span>
                </div>
            </div>
        </div>

        <div class="info-panel">
            <div class="info-item">
                <div class="info-label">ÈÄ£Á∫åÁç≤Âãù</div>
                <div class="info-value" id="streak">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">Á∏ΩÁç≤Âãù</div>
                <div class="info-value" id="totalWins">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">Á∏ΩÈÅäÊà≤</div>
                <div class="info-value" id="totalGames">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">Áç≤ÂãùÁéá</div>
                <div class="info-value" id="winRate">0%</div>
            </div>
            <div class="info-item" id="streakBonusItem" style="display: none;">
                <div class="info-label">ÈÄ£Á∫åÂä†Êàê</div>
                <div class="info-value" id="streakBonus">+0%</div>
            </div>
            <div class="info-item" id="maxStreakItem" style="display: none;">
                <div class="info-label">ÊúÄÈ´òÈÄ£Âãù</div>
                <div class="info-value" id="maxStreak">0</div>
            </div>
        </div>
    </div>

    <script>
        // ÈáëÂπ£Á≥ªÁµ±È°ûÂà•
        class CoinSystem {
            constructor() {
                this.coins = parseInt(localStorage.getItem('coins')) || 0;
            }

            getCoins() {
                return this.coins;
            }

            addCoins(amount) {
                this.coins += amount;
                this.saveCoins();
                this.updateDisplay();
            }

            useCoins(amount) {
                if (this.coins >= amount) {
                    this.coins -= amount;
                    this.saveCoins();
                    this.updateDisplay();
                    return true;
                }
                return false;
            }

            saveCoins() {
                localStorage.setItem('coins', this.coins.toString());
            }

            updateDisplay() {
                const coinsElement = document.getElementById('coins');
                if (coinsElement) {
                    coinsElement.textContent = this.coins.toLocaleString();
                }
            }
        }

        // ÊòüÊòüÁ≥ªÁµ±È°ûÂà•
        class StarSystem {
            constructor() {
                this.stars = 0;
                this.loadTotalStars();
            }

            getStars() {
                return this.stars;
            }

            addStars(amount) {
                this.stars += amount;
                this.saveStars();
                this.updateDisplay();
            }

            useStars(amount) {
                if (this.stars >= amount) {
                    this.stars -= amount;
                    this.saveStars();
                    this.updateDisplay();
                    return true;
                }
                return false;
            }

            // ËºâÂÖ•Á∏ΩÊòüÊòüÊï∏ÔºàÂæûÊâÄÊúâ‰æÜÊ∫êÔºâ
            loadTotalStars() {
                let totalStars = 0;
                
                // Âæû StarRewardSystem Áç≤ÂèñÊòüÊòü
                if (window.StarRewardSystem) {
                    totalStars += window.StarRewardSystem.getStars();
                }
                
                // Âæû localStorage Áç≤ÂèñÂÖ∂‰ªñÊòüÊòüÁ≥ªÁµ±ÁöÑÊòüÊòü
                try {
                    const savedStars = localStorage.getItem('totalStars');
                    if (savedStars) {
                        totalStars += parseInt(savedStars);
                    }
                } catch (error) {
                    console.log('ËºâÂÖ•ÂÖ∂‰ªñÊòüÊòüÁ≥ªÁµ±Â§±Êïó:', error);
                }
                
                // ÂæûÁï∂ÂâçÈÅäÊà≤ÁöÑÊòüÊòü
                try {
                    const currentStars = localStorage.getItem('stars');
                    if (currentStars) {
                        totalStars += parseInt(currentStars);
                    }
                } catch (error) {
                    console.log('ËºâÂÖ•Áï∂ÂâçÈÅäÊà≤ÊòüÊòüÂ§±Êïó:', error);
                }
                
                this.stars = totalStars;
                console.log('‚≠ê Á∏ΩÊòüÊòüÊï∏ËºâÂÖ•ÂÆåÊàê:', this.stars);
            }

            // ‰øùÂ≠òÊòüÊòüÂà∞ÊâÄÊúâÁõ∏ÈóúÁ≥ªÁµ±
            saveStars() {
                // ‰øùÂ≠òÂà∞Áï∂ÂâçÈÅäÊà≤ÁöÑÊòüÊòü
                localStorage.setItem('stars', this.stars.toString());
                
                // ‰øùÂ≠òÂà∞Á∏ΩÊòüÊòüÁ≥ªÁµ±
                localStorage.setItem('totalStars', this.stars.toString());
                
                // Â¶ÇÊûú StarRewardSystem Â≠òÂú®ÔºåÂêåÊ≠•Êõ¥Êñ∞
                if (window.StarRewardSystem) {
                    window.StarRewardSystem.addStars(0); // Ëß∏ÁôºÊõ¥Êñ∞È°ØÁ§∫
                }
                
                console.log('‚≠ê ÊòüÊòüÂ∑≤ÂêåÊ≠•‰øùÂ≠òÂà∞ÊâÄÊúâÁ≥ªÁµ±:', this.stars);
            }

            updateDisplay() {
                const starsElement = document.getElementById('stars');
                if (starsElement) {
                    starsElement.textContent = this.stars.toLocaleString();
                }
            }
        }

        // Èü≥ÊïàÁ≥ªÁµ±
        const soundSystem = {
            playSound: function(soundName) {
                const audio = new Audio(`sound/${soundName}.mp3`);
                audio.volume = 0.3;
                audio.play().catch(e => console.log('Èü≥ÊïàÊí≠ÊîæÂ§±Êïó:', e));
            },
            playSpinSound: function() {
                this.playSound('winning-82808');
            },
            playLoseSound: function() {
                this.playSound('8-bit-video-game-lose-sound-version-1-145828');
            },
            playWinSound: function() {
                this.playSound('game-bonus-144751');
            },
            playJackpotSound: function() {
                this.playSound('brass-fanfare-with-timpani-and-winchimes-reverberated-146260');
            }
        };

        // ÈÄ£Á∫åÁç≤ÂãùÈü≥ÊïàÁ≥ªÁµ±
        function playStreakSound(streak) {
            // Ê†πÊìöÈÄ£Á∫åÁç≤ÂãùÊ¨°Êï∏Êí≠Êîæ‰∏çÂêåÈü≥Êïà
            if (streak >= 10) {
                soundSystem.playJackpotSound(); // 10ÈÄ£Âãù‰ΩøÁî®Â§ßÁçéÈü≥Êïà
            } else if (streak >= 7) {
                soundSystem.playWinSound(); // 7ÈÄ£Âãù‰ΩøÁî®Áç≤ÂãùÈü≥Êïà
                setTimeout(() => soundSystem.playWinSound(), 500); // ÈáçË§áÊí≠Êîæ
            } else if (streak >= 5) {
                soundSystem.playWinSound(); // 5ÈÄ£Âãù‰ΩøÁî®Áç≤ÂãùÈü≥Êïà
            } else {
                soundSystem.playWinSound(); // ÂÖ∂‰ªñÈÄ£Á∫åÁç≤Âãù‰ΩøÁî®Áç≤ÂãùÈü≥Êïà
            }
            
            // Ê∑ªÂä†Ë¶ñË¶∫ÊïàÊûú
            const slotDisplay = document.querySelector('.slot-display');
            if (slotDisplay) {
                slotDisplay.style.animation = 'none';
                slotDisplay.offsetHeight; // Âº∑Âà∂ÈáçÁπ™
                slotDisplay.style.animation = `winShake 0.8s ease-in-out`;
                
                // Ê†πÊìöÈÄ£Á∫åÁç≤ÂãùÊ¨°Êï∏Ê∑ªÂä†‰∏çÂêåÈ°èËâ≤ÊïàÊûú
                if (streak >= 10) {
                    slotDisplay.style.boxShadow = '0 0 50px rgba(255, 215, 0, 0.8)';
                } else if (streak >= 7) {
                    slotDisplay.style.boxShadow = '0 0 40px rgba(255, 107, 53, 0.8)';
                } else if (streak >= 5) {
                    slotDisplay.style.boxShadow = '0 0 30px rgba(255, 193, 7, 0.8)';
                } else {
                    slotDisplay.style.boxShadow = '0 0 20px rgba(76, 175, 80, 0.8)';
                }
                
                setTimeout(() => {
                    slotDisplay.style.boxShadow = '';
                }, 2000);
            }
        }

        // ÈÅäÊà≤ÁãÄÊÖã
        let gameState = {
            streak: 0,
            maxStreak: 0, // ÊúÄÈ´òÈÄ£ÂãùË®òÈåÑ
            totalWins: 0,
            totalGames: 0,
            isSpinning: false,
            betMultiplier: 1, // ‰∏ãÊ≥®ÂÄçÊï∏
            currentBet: 0, // Áï∂Ââç‰∏ãÊ≥®ÈáëÈ°ç
            isNormalBet: false, // ÊòØÂê¶ÁÇ∫‰∏ÄËà¨‰∏ãÊ≥®
            autoSpin: {
                isActive: false,
                count: 0,
                totalCount: 0,
                interval: null,
                wins: 0,
                losses: 0
            }
        };

        // ÈáëÂπ£ÂíåÊòüÊòüÁ≥ªÁµ±ÂØ¶‰æã
        let coinSystem;
        let starSystem;

        // Á¨¶ËôüÂÆöÁæ©
        const symbols = ['üçé', 'üçä', 'üçá', 'üçì', 'üçå', 'üçí', 'üçë', 'ü•ù'];
        
        // Á¨¶ËôüÊ¨äÈáçÔºàÂΩ±ÈüøÂá∫ÁèæÊ©üÁéáÔºâ
        const symbolWeights = {
            'üçé': 25,  // ËòãÊûú - ÊúÄÂ∏∏Ë¶ã (2ÂÄç)
            'üçä': 20,  // Ê©òÂ≠ê - Â∏∏Ë¶ã (3ÂÄç)
            'üçá': 18,  // Ëë°ËêÑ - ËºÉÂ∏∏Ë¶ã (4ÂÄç)
            'üçì': 15,  // ËçâËéì - ‰∏≠Á≠â (5ÂÄç)
            'üçå': 12,  // È¶ôËïâ - ‰∏≠Á≠â (6ÂÄç)
            'üçí': 8,   // Ê´ªÊ°É - ËºÉÁ®ÄÊúâ (8ÂÄç)
            'üçë': 6,   // Ê°ÉÂ≠ê - Á®ÄÊúâ (10ÂÄç)
            'ü•ù': 4    // Â•áÁï∞Êûú - ÊúÄÁ®ÄÊúâ (15ÂÄç)
        };

        // ÁçéÂãµÂÄçÊï∏
        const rewards = {
            'üçé': 1.2, // ËòãÊûú - 1.2ÂÄç
            'üçä': 1.5, // Ê©òÂ≠ê - 1.5ÂÄç
            'üçá': 1.8, // Ëë°ËêÑ - 1.8ÂÄç
            'üçì': 2.0, // ËçâËéì - 2ÂÄç
            'üçå': 2.5, // È¶ôËïâ - 2.5ÂÄç
            'üçí': 3.0, // Ê´ªÊ°É - 3ÂÄç
            'üçë': 4.0, // Ê°ÉÂ≠ê - 4ÂÄç
            'ü•ù': 10.0 // Â•áÁï∞Êûú - 10ÂÄç
        };

        // Á¨¶ËôüÂúñÁâáÊò†Â∞Ñ
        const symbolImages = {
            'üçé': 'https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg',
            'üçä': 'https://i.pinimg.com/736x/4e/fa/98/4efa98d2e58f88eafe11af6237ea223f.jpg',
            'üçá': 'https://i.pinimg.com/736x/43/45/52/43455278054c88bcf23c98a22c310930.jpg',
            'üçì': 'https://i.pinimg.com/736x/4c/46/3e/4c463ed4ba5987c44f383bafa186ddd9.jpg',
            'üçå': 'https://i.pinimg.com/736x/05/a3/21/05a321e41dd66b31d74b8ccd74f00c1b.jpg',
            'üçí': 'https://i.pinimg.com/736x/1d/cb/e1/1dcbe1dbc84baa65c10c6189db67fe6e.jpg',
            'üçë': 'https://i.pinimg.com/736x/1b/cb/e4/1bcbe4117c1bd36174de3d0f437fd81c.jpg',
            'ü•ù': 'https://i.pinimg.com/736x/76/db/e0/76dbe099ac26042038bb37ea1ee3d8c0.jpg'
        };

        // ÂúñÁâáÂà∞Á¨¶ËôüÁöÑÂèçÂêëÊò†Â∞ÑÔºàÁî®ÊñºË≠òÂà•Ôºâ
        const imageToSymbol = {
            'https://i.pinimg.com/736x/a3/5e/9a/a35e9aa0e9f5a6af14e2572214b2d214.jpg': ['üçé'],
            'https://i.pinimg.com/736x/05/a3/21/05a321e41dd66b31d74b8ccd74f00c1b.jpg': ['üçå'],
            'https://i.pinimg.com/736x/4e/fa/98/4efa98d2e58f88eafe11af6237ea223f.jpg': ['üçä'],
            'https://i.pinimg.com/736x/43/45/52/43455278054c88bcf23c98a22c310930.jpg': ['üçá'],
            'https://i.pinimg.com/736x/4c/46/3e/4c463ed4ba5987c44f383bafa186ddd9.jpg': ['üçì'],
            'https://i.pinimg.com/736x/1d/cb/e1/1dcbe1dbc84baa65c10c6189db67fe6e.jpg': ['üçí'],
            'https://i.pinimg.com/736x/76/db/e0/76dbe099ac26042038bb37ea1ee3d8c0.jpg': ['ü•ù'],
            'https://i.pinimg.com/736x/1b/cb/e4/1bcbe4117c1bd36174de3d0f437fd81c.jpg': ['üçë']
        };

        // ÂàùÂßãÂåñÈÅäÊà≤
        function initGame() {
            // ÂàùÂßãÂåñÈáëÂπ£ÂíåÊòüÊòüÁ≥ªÁµ±
            coinSystem = new CoinSystem();
            starSystem = new StarSystem();
            
            loadGameData();
            updateDisplay();
            generateReelStrips();
            setupEventListeners();
            
            // ÂÆöÊúüÂêåÊ≠•ÊòüÊòüÊï∏ÔºàÊØè5ÁßíÔºâ
            setInterval(() => {
                if (starSystem) {
                    starSystem.loadTotalStars();
                    starSystem.updateDisplay();
                }
            }, 5000);
            
            console.log('üé∞ ÊãâÈú∏Ê©üÈÅäÊà≤ÂàùÂßãÂåñÂÆåÊàêÔºåÁ∏ΩÊòüÊòüÈÄ£ÂãïÂ∑≤ÂïüÁî®');
        }

        // Ë®≠ÂÆö‰∫ã‰ª∂Áõ£ËÅΩÂô®
        function setupEventListeners() {
            const exchangeBtn = document.getElementById('exchangeBtn');
            if (exchangeBtn) {
                exchangeBtn.addEventListener('click', showExchangeShop);
            }

            // ‰∏ãÊ≥®ÂÄçÊï∏ÊåâÈàï‰∫ã‰ª∂
            const betButtons = document.querySelectorAll('.bet-btn');
            betButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // ÁßªÈô§ÊâÄÊúâÊåâÈàïÁöÑactiveÈ°ûÂà•
                    betButtons.forEach(b => b.classList.remove('active'));
                    // Ê∑ªÂä†Áï∂ÂâçÊåâÈàïÁöÑactiveÈ°ûÂà•
                    this.classList.add('active');
                    // Êõ¥Êñ∞‰∏ãÊ≥®ÂÄçÊï∏
                    gameState.betMultiplier = parseInt(this.dataset.multiplier);
                    updateButtonTexts();
                });
            });

            // ÊªëÊ°ø‰∫ã‰ª∂Áõ£ËÅΩÂô®
            setupSliderListeners();
        }

        // Ë®≠ÂÆöÊªëÊ°ø‰∫ã‰ª∂Áõ£ËÅΩÂô®
        function setupSliderListeners() {
            // ËΩâÂãïÊ¨°Êï∏ÊªëÊ°ø
            const spinCountSlider = document.getElementById('autoSpinCountSlider');
            const spinCountValue = document.getElementById('spinCountValue');
            
            if (spinCountSlider && spinCountValue) {
                spinCountSlider.addEventListener('input', function() {
                    const value = this.value;
                    spinCountValue.textContent = value;
                    updateSliderBackground(this);
                });
                
                // ÂàùÂßãÂåñÊªëÊ°øËÉåÊôØ
                updateSliderBackground(spinCountSlider);
            }

            // ÈñìÈöîÊôÇÈñìÊªëÊ°ø
            const intervalSlider = document.getElementById('autoSpinIntervalSlider');
            const intervalValue = document.getElementById('intervalValue');
            
            if (intervalSlider && intervalValue) {
                intervalSlider.addEventListener('input', function() {
                    const value = this.value;
                    intervalValue.textContent = value;
                    updateSliderBackground(this);
                });
                
                // ÂàùÂßãÂåñÊªëÊ°øËÉåÊôØ
                updateSliderBackground(intervalSlider);
            }
        }

        // Êõ¥Êñ∞ÊªëÊ°øËÉåÊôØ
        function updateSliderBackground(slider) {
            const value = slider.value;
            const min = slider.min;
            const max = slider.max;
            const percentage = ((value - min) / (max - min)) * 100;
            
            slider.style.background = `linear-gradient(90deg, #ffd700 0%, #ffd700 ${percentage}%, rgba(255, 215, 0, 0.3) ${percentage}%, rgba(255, 215, 0, 0.3) 100%)`;
        }

        // ËºâÂÖ•ÈÅäÊà≤Ë≥áÊñô
        function loadGameData() {
            const saved = localStorage.getItem('slotMachineData');
            if (saved) {
                const data = JSON.parse(saved);
                gameState = { ...gameState, ...data };
            }
        }

        // ‰øùÂ≠òÈÅäÊà≤Ë≥áÊñô
        function saveGameData() {
            localStorage.setItem('slotMachineData', JSON.stringify(gameState));
        }

        // Êõ¥Êñ∞ÊúÄÈ´òÈÄ£ÂãùÈ°ØÁ§∫
        function updateMaxStreakDisplay() {
            const maxStreakItem = document.getElementById('maxStreakItem');
            const maxStreak = document.getElementById('maxStreak');
            
            if (gameState.maxStreak > 0) {
                maxStreakItem.style.display = 'block';
                maxStreak.textContent = gameState.maxStreak;
                
                // Ê†πÊìöÊúÄÈ´òÈÄ£ÂãùÊ¨°Êï∏Ë®≠ÁΩÆ‰∏çÂêåÈ°èËâ≤
                if (gameState.maxStreak >= 10) {
                    maxStreak.style.color = '#ffd700';
                    maxStreak.style.textShadow = '0 0 10px rgba(255, 215, 0, 0.8)';
                } else if (gameState.maxStreak >= 7) {
                    maxStreak.style.color = '#ff6b35';
                    maxStreak.style.textShadow = '0 0 8px rgba(255, 107, 53, 0.8)';
                } else if (gameState.maxStreak >= 5) {
                    maxStreak.style.color = '#ffc107';
                    maxStreak.style.textShadow = '0 0 6px rgba(255, 193, 7, 0.8)';
                } else {
                    maxStreak.style.color = '#4CAF50';
                    maxStreak.style.textShadow = '0 0 4px rgba(76, 175, 80, 0.8)';
                }
            } else {
                maxStreakItem.style.display = 'none';
            }
        }

        // Êõ¥Êñ∞ÈÄ£Á∫åÂä†ÊàêÈ°ØÁ§∫
        function updateStreakBonusDisplay() {
            const streakBonusItem = document.getElementById('streakBonusItem');
            const streakBonus = document.getElementById('streakBonus');
            
            let bonusPercentage = 0;
            
            // Ë®àÁÆóÈÄ£Á∫åÂä†ÊàêÁôæÂàÜÊØî
            if (gameState.streak >= 1) {
                bonusPercentage += 5; // 1ÈÄ£ÂãùÔºö+5%Ê©üÁéá
            }
            if (gameState.streak >= 2) {
                bonusPercentage += 8; // 2ÈÄ£ÂãùÔºö+8%Ê©üÁéá
            }
            if (gameState.streak >= 3) {
                bonusPercentage += 10; // 3ÈÄ£ÂãùÔºö+10%Ê©üÁéá
            }
            if (gameState.streak >= 5) {
                bonusPercentage += 15; // 5ÈÄ£ÂãùÔºö+15%Ê©üÁéá
            }
            
            if (bonusPercentage > 0) {
                streakBonusItem.style.display = 'block';
                streakBonus.textContent = `+${bonusPercentage}%`;
                streakBonus.style.color = '#ffd700';
                streakBonus.style.textShadow = '0 0 10px rgba(255, 215, 0, 0.5)';
            } else {
                streakBonusItem.style.display = 'none';
            }
        }

        // Êõ¥Êñ∞ÊåâÈàïÊñáÂ≠ó
        function updateButtonTexts() {
            const allInButton = document.getElementById('allInButton');
            const normalSpinButton = document.getElementById('normalSpinButton');
            
            if (allInButton) {
                const currentCoins = coinSystem ? coinSystem.getCoins() : 0;
                allInButton.textContent = `üé∞ Ë≥≠‰∏äÊâÄÊúâÈáëÂπ£ (${currentCoins.toLocaleString()}ü™ô)`;
            }
            
            if (normalSpinButton) {
                const normalBetCost = 5000 * gameState.betMultiplier;
                normalSpinButton.textContent = `üé∞ ‰∏ÄËà¨‰∏ãÊ≥® (${normalBetCost.toLocaleString()}ü™ô)`;
            }
        }

        // Êõ¥Êñ∞È°ØÁ§∫
        function updateDisplay() {
            document.getElementById('streak').textContent = gameState.streak;
            document.getElementById('totalWins').textContent = gameState.totalWins;
            document.getElementById('totalGames').textContent = gameState.totalGames;
            
            const winRate = gameState.totalGames > 0 ? 
                Math.round((gameState.totalWins / gameState.totalGames) * 100) : 0;
            document.getElementById('winRate').textContent = winRate + '%';

            // Êõ¥Êñ∞ÊúÄÈ´òÈÄ£ÂãùÈ°ØÁ§∫
            updateMaxStreakDisplay();

            // Êõ¥Êñ∞ÈÄ£Á∫åÂä†ÊàêÈ°ØÁ§∫
            updateStreakBonusDisplay();

            // Êõ¥Êñ∞ÈáëÂπ£ÂíåÊòüÊòüÈ°ØÁ§∫
            if (coinSystem) coinSystem.updateDisplay();
            if (starSystem) starSystem.updateDisplay();

            // Ê™¢Êü•ÊòØÂê¶Ê≤íÊúâÈáëÂπ£ÔºåÈ°ØÁ§∫ÊèêÁ§∫
            const noCoinsHint = document.getElementById('noCoinsHint');
            if (noCoinsHint) {
                const currentCoins = coinSystem ? coinSystem.getCoins() : 0;
                if (currentCoins <= 0) {
                    noCoinsHint.style.display = 'block';
                } else {
                    noCoinsHint.style.display = 'none';
                }
            }

            // Êõ¥Êñ∞ÊåâÈàïÊñáÂ≠ó
            updateButtonTexts();
        }

        // ÁîüÊàêËΩâËº™Ê¢ù
        function generateReelStrips() {
            const strips = ['strip1', 'strip2', 'strip3'];
            
            console.log('üé∞ ÈñãÂßãÁîüÊàêËΩâËº™Ê¢ù...');
            
            strips.forEach((stripId, reelIndex) => {
                const strip = document.getElementById(stripId);
                if (!strip) {
                    console.error(`‚ùå Êâæ‰∏çÂà∞ËΩâËº™ÂÖÉÁ¥†: ${stripId}`);
                    return;
                }
                
                strip.innerHTML = '';
                console.log(`üé∞ ÁîüÊàêËΩâËº™ ${reelIndex + 1} (${stripId})`);
                
                // ÁÇ∫ÊØèÂÄãËΩâËº™ÁîüÊàê20ÂÄãÁ¨¶ËôüÔºåÁ¢∫‰øùÂåÖÂê´ÊâÄÊúâÂèØËÉΩÁöÑÁ¨¶Ëôü
                const allSymbols = Object.keys(symbolWeights);
                const symbolsForReel = [];
                
                // Á¢∫‰øùÊØèÂÄãËΩâËº™ÈÉΩÂåÖÂê´ÊâÄÊúâÁ¨¶Ëôü
                for (let i = 0; i < 20; i++) {
                    if (i < allSymbols.length) {
                        // ÂâçÂπæÂÄã‰ΩçÁΩÆÊîæÁΩÆÊâÄÊúâ‰∏çÂêåÁöÑÁ¨¶Ëôü
                        symbolsForReel.push(allSymbols[i]);
                    } else {
                        // ÂÖ∂È§ò‰ΩçÁΩÆÈö®Ê©üÈÅ∏Êìá
                        symbolsForReel.push(getRandomSymbol());
                    }
                }
                
                // Êâì‰∫ÇÁ¨¶ËôüÈ†ÜÂ∫è
                for (let i = symbolsForReel.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [symbolsForReel[i], symbolsForReel[j]] = [symbolsForReel[j], symbolsForReel[i]];
                }
                
                // ÂâµÂª∫ËΩâËº™È†ÖÁõÆ
                symbolsForReel.forEach((symbol, index) => {
                    const item = document.createElement('div');
                    item.className = 'reel-item symbol';
                    
                    // Ê™¢Êü•ÊòØÂê¶ÊúâÂ∞çÊáâÁöÑÂúñÁâá
                    if (symbolImages[symbol] && symbolImages[symbol].startsWith('http')) {
                        // ‰ΩøÁî®ÂúñÁâá
                        const img = document.createElement('img');
                        img.src = symbolImages[symbol];
                        img.alt = symbol;
                        img.style.width = '100%';
                        img.style.height = '100%';
                        img.style.objectFit = 'cover';
                        img.style.borderRadius = '8px';
                        item.appendChild(img);
                    } else {
                        // ‰ΩøÁî® emojiÔºàÂÇôÁî®ÊñπÊ°àÔºâ
                        item.textContent = symbol;
                    }
                    
                    strip.appendChild(item);
                });
                
                console.log(`‚úÖ ËΩâËº™ ${reelIndex + 1} ÁîüÊàêÂÆåÊàêÔºåÂÖ± ${strip.children.length} ÂÄãÈ†ÖÁõÆ`);
                console.log(`üìä ËΩâËº™ ${reelIndex + 1} Á¨¶ËôüÂàÜÂ∏É:`, symbolsForReel);
            });
            
            console.log('üé∞ ÊâÄÊúâËΩâËº™Ê¢ùÁîüÊàêÂÆåÊàê');
        }

        // ÈáçÊñ∞ÁîüÊàêËΩâËº™Ê¢ùÔºàÁî®ÊñºËΩâÂãïÊôÇÔºâ
        function regenerateReelStrips() {
            const strips = ['strip1', 'strip2', 'strip3'];
            
            console.log('üîÑ ÈáçÊñ∞ÁîüÊàêËΩâËº™Ê¢ù...');
            
            strips.forEach((stripId, reelIndex) => {
                const strip = document.getElementById(stripId);
                if (!strip) {
                    console.error(`‚ùå Êâæ‰∏çÂà∞ËΩâËº™ÂÖÉÁ¥†: ${stripId}`);
                    return;
                }
                
                // Ê∏ÖÁ©∫ÁèæÊúâÂÖßÂÆπ
                strip.innerHTML = '';
                
                // ÁÇ∫ÊØèÂÄãËΩâËº™ÁîüÊàê20ÂÄãÁ¨¶ËôüÔºåÁ¢∫‰øùÂåÖÂê´ÊâÄÊúâÂèØËÉΩÁöÑÁ¨¶Ëôü
                const allSymbols = Object.keys(symbolWeights);
                const symbolsForReel = [];
                
                // Á¢∫‰øùÊØèÂÄãËΩâËº™ÈÉΩÂåÖÂê´ÊâÄÊúâÁ¨¶Ëôü
                for (let i = 0; i < 20; i++) {
                    if (i < allSymbols.length) {
                        // ÂâçÂπæÂÄã‰ΩçÁΩÆÊîæÁΩÆÊâÄÊúâ‰∏çÂêåÁöÑÁ¨¶Ëôü
                        symbolsForReel.push(allSymbols[i]);
                    } else {
                        // ÂÖ∂È§ò‰ΩçÁΩÆÈö®Ê©üÈÅ∏Êìá
                        symbolsForReel.push(getRandomSymbol());
                    }
                }
                
                // Êâì‰∫ÇÁ¨¶ËôüÈ†ÜÂ∫è
                for (let i = symbolsForReel.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [symbolsForReel[i], symbolsForReel[j]] = [symbolsForReel[j], symbolsForReel[i]];
                }
                
                // ÂâµÂª∫ËΩâËº™È†ÖÁõÆ
                symbolsForReel.forEach((symbol, index) => {
                    const item = document.createElement('div');
                    item.className = 'reel-item symbol';
                    
                    // Ê™¢Êü•ÊòØÂê¶ÊúâÂ∞çÊáâÁöÑÂúñÁâá
                    if (symbolImages[symbol] && symbolImages[symbol].startsWith('http')) {
                        // ‰ΩøÁî®ÂúñÁâá
                        const img = document.createElement('img');
                        img.src = symbolImages[symbol];
                        img.alt = symbol;
                        img.style.width = '100%';
                        img.style.height = '100%';
                        img.style.objectFit = 'cover';
                        img.style.borderRadius = '8px';
                        item.appendChild(img);
                    } else {
                        // ‰ΩøÁî® emojiÔºàÂÇôÁî®ÊñπÊ°àÔºâ
                        item.textContent = symbol;
                    }
                    
                    strip.appendChild(item);
                });
                
                console.log(`‚úÖ ËΩâËº™ ${reelIndex + 1} ÈáçÊñ∞ÁîüÊàêÂÆåÊàê`);
            });
            
            console.log('üîÑ ÊâÄÊúâËΩâËº™Ê¢ùÈáçÊñ∞ÁîüÊàêÂÆåÊàê');
        }

        // ÂèñÂæóÈö®Ê©üÁ¨¶Ëôü
        function getRandomSymbol() {
            const totalWeight = Object.values(symbolWeights).reduce((a, b) => a + b, 0);
            let random = Math.random() * totalWeight;
            
            for (const [symbol, weight] of Object.entries(symbolWeights)) {
                random -= weight;
                if (random <= 0) {
                    return symbol;
                }
            }
            
            return symbols[0]; // È†êË®≠ÂÄº
        }

        // Ë≥≠‰∏äÊâÄÊúâÈáëÂπ£ËΩâÂãï
        function spinAllIn() {
            if (gameState.isSpinning) return;
            
            // ‰∏ÄÊ¨°ÊÄßËº∏ÂÖâÊâÄÊúâÈáëÂπ£
            const allCoins = coinSystem.getCoins();
            
            if (!coinSystem || allCoins <= 0) {
                showResult('ÈáëÂπ£‰∏çË∂≥ÔºÅË´ãÂÖàÂÖåÊèõÊòüÊòüÁç≤ÂæóÈáëÂπ£', 'lose');
                return;
            }

            // Êí≠ÊîæËΩâÂãïÈü≥Êïà
            soundSystem.playSpinSound();

            // Êâ£Èô§ÊâÄÊúâÈáëÂπ£
            coinSystem.useCoins(allCoins);
            gameState.isSpinning = true;
            gameState.totalGames++;
            gameState.currentBet = allCoins; // ‰øùÂ≠òÁï∂Ââç‰∏ãÊ≥®ÈáëÈ°ç
            gameState.isNormalBet = false; // Ê®ôË®òÁÇ∫Ë≥≠‰∏äÊâÄÊúâÈáëÂπ£
            
            const allInButton = document.getElementById('allInButton');
            const normalSpinButton = document.getElementById('normalSpinButton');
            allInButton.disabled = true;
            normalSpinButton.disabled = true;
            allInButton.textContent = 'üé∞ ËΩâÂãï‰∏≠...';
            normalSpinButton.textContent = 'üé∞ ËΩâÂãï‰∏≠...';

            // ÈáçÊñ∞ÁîüÊàêËΩâËº™Ê¢ù‰ª•Á¢∫‰øùÊúâ‰∏çÂêåÁöÑÁ¨¶Ëôü
            regenerateReelStrips();

            // Ê†πÊìö‰∏ãÊ≥®ÈáëÈ°çË™øÊï¥Áç≤ÂãùÊ©üÁéá - ËÆìÁé©ÂÆ∂ÊúâÊ©üÊúÉÁç≤Âãù
            let winChance = 0.40; // Âü∫Á§é40%Áç≤ÂãùÊ©üÁéá
            
            // ÈÄ£Á∫åÁç≤ÂãùÂä†Êàê - Â¢ûÂä†ÈÄ£Á∫åÁç≤ÂãùÁöÑÊ©üÁéá
            if (gameState.streak >= 1) {
                winChance += 0.03; // 1ÈÄ£ÂãùÔºö+3%Ê©üÁéá
            }
            if (gameState.streak >= 2) {
                winChance += 0.05; // 2ÈÄ£ÂãùÔºö+5%Ê©üÁéá
            }
            if (gameState.streak >= 3) {
                winChance += 0.07; // 3ÈÄ£ÂãùÔºö+7%Ê©üÁéá
            }
            if (gameState.streak >= 5) {
                winChance += 0.10; // 5ÈÄ£ÂãùÔºö+10%Ê©üÁéá
            }
            
            // Â¶ÇÊûúÊòØË≥≠‰∏äÊâÄÊúâÈáëÂπ£‰∏îÈáëÈ°çËºÉÈ´òÔºåÈÅ©Â∫¶Èôç‰ΩéÁç≤ÂãùÊ©üÁéá
            if (gameState.currentBet > 50000) {
                winChance = Math.max(0.25, winChance - 0.15); // Ë≥≠‰∏äË∂ÖÈÅé50000ÈáëÂπ£ÔºöÊúÄ‰Ωé25%Áç≤ÂãùÊ©üÁéá
            } else if (gameState.currentBet > 20000) {
                winChance = Math.max(0.30, winChance - 0.10); // Ë≥≠‰∏äË∂ÖÈÅé20000ÈáëÂπ£ÔºöÊúÄ‰Ωé30%Áç≤ÂãùÊ©üÁéá
            }
            
            const shouldWin = Math.random() < winChance;
            let resultSymbols = [];
            
            if (shouldWin) {
                // Áç≤ÂãùÔºö‰∏âÂÄãÁõ∏ÂêåÁ¨¶Ëôü
                const winningSymbol = getRandomSymbol();
                resultSymbols = [winningSymbol, winningSymbol, winningSymbol];
            } else {
                // Â§±ÊïóÔºö‰∏çÂêåÁ¨¶Ëôü
                const symbols = Object.keys(symbolWeights);
                resultSymbols = [
                    symbols[Math.floor(Math.random() * symbols.length)],
                    symbols[Math.floor(Math.random() * symbols.length)],
                    symbols[Math.floor(Math.random() * symbols.length)]
                ];
                
                // Á¢∫‰øù‰∏çÊòØ‰∏âÂÄãÁõ∏Âêå
                while (resultSymbols[0] === resultSymbols[1] && resultSymbols[1] === resultSymbols[2]) {
                    resultSymbols[2] = symbols[Math.floor(Math.random() * symbols.length)];
                }
            }

            console.log('üé∞ ÈñãÂßãËΩâÂãïÔºåÁµêÊûúÁ¨¶Ëôü:', resultSymbols);
            
            // Á¢∫‰øùËΩâËº™Ê¢ùÂ∑≤ÁîüÊàê
            setTimeout(() => {
                // ÈñãÂßãÂãïÁï´
                animateSpin(resultSymbols);
            }, 100);
        }

        // ÂãïÁï´ËΩâÂãï
        function animateSpin(resultSymbols) {
            const strips = ['strip1', 'strip2', 'strip3'];
            const spinDuration = 2000; // 2Áßí
            const delays = [0, 200, 400]; // ÊØèÂÄãËΩâËº™Âª∂ÈÅ≤‰∏çÂêåÊôÇÈñì

            console.log('üé¨ ÈñãÂßãÂãïÁï´ËΩâÂãïÔºåÁõÆÊ®ôÁ¨¶Ëôü:', resultSymbols);

            // Á¢∫‰øùÊâÄÊúâËΩâËº™ÈÉΩÂ≠òÂú®‰∏¶ÊúâÂÖßÂÆπ
            const validStrips = strips.filter(stripId => {
                const strip = document.getElementById(stripId);
                if (!strip) {
                    console.error(`‚ùå Êâæ‰∏çÂà∞ËΩâËº™ÂÖÉÁ¥†: ${stripId}`);
                    return false;
                }
                const items = strip.querySelectorAll('.reel-item');
                if (items.length === 0) {
                    console.error(`‚ùå ËΩâËº™ ${stripId} Ê≤íÊúâÂÖßÂÆπ`);
                    return false;
                }
                return true;
            });

            if (validStrips.length !== 3) {
                console.error('‚ùå ËΩâËº™ÂÖÉÁ¥†‰∏çÂÆåÊï¥ÔºåÁÑ°Ê≥ïÈñãÂßãÂãïÁï´');
                // ÈáçÁΩÆÈÅäÊà≤ÁãÄÊÖã
                gameState.isSpinning = false;
                const spinButton = document.getElementById('spinButton');
                if (spinButton) {
                    spinButton.disabled = false;
                    updateSpinButtonText();
                }
                return;
            }

            validStrips.forEach((stripId, index) => {
                const strip = document.getElementById(stripId);
                const finalSymbol = resultSymbols[index];
                
                console.log(`üéØ ËΩâËº™ ${index + 1} (${stripId})ÔºåÁõÆÊ®ôÁ¨¶Ëôü: ${finalSymbol}`);
                
                // ÈáçÁΩÆËΩâËº™‰ΩçÁΩÆ
                strip.style.transition = 'none';
                strip.style.transform = 'translateY(0)';
                
                // Âº∑Âà∂ÈáçÁπ™
                strip.offsetHeight;
                
                // Ë®≠ÁΩÆÊúÄÁµÇ‰ΩçÁΩÆ
                setTimeout(() => {
                    // ÊâæÂà∞ÊúÄÁµÇÁ¨¶ËôüÁöÑ‰ΩçÁΩÆ
                    const items = strip.querySelectorAll('.reel-item');
                    let targetIndex = 0;
                    
                    console.log(`üîç ÊêúÂ∞ãËΩâËº™ ${index + 1} ‰∏≠ÁöÑÁ¨¶ËôüÔºåÂÖ± ${items.length} ÂÄãÈ†ÖÁõÆ`);
                    
                    for (let i = 0; i < items.length; i++) {
                        const item = items[i];
                        let itemSymbol = '';
                        
                        // Ê™¢Êü•ÊòØÂê¶ÊúâÂúñÁâá
                        const img = item.querySelector('img');
                        if (img) {
                            // Â¶ÇÊûúÊúâÂúñÁâáÔºåÊ†πÊìöÂúñÁâá‰æÜÊ∫êÂà§Êñ∑Á¨¶Ëôü
                            if (img.src.includes('76dbe099ac26042038bb37ea1ee3d8c0')) {
                                itemSymbol = 'ü•ù'; // Â•áÁï∞Êûú
                            } else if (img.src.includes('1bcbe4117c1bd36174de3d0f437fd81c')) {
                                itemSymbol = 'üçë'; // Ê°ÉÂ≠ê
                            } else if (img.src.includes('4efa98d2e58f88eafe11af6237ea223f')) {
                                itemSymbol = 'üçä'; // Ê©òÂ≠ê
                            } else if (img.src.includes('1dcbe1dbc84baa65c10c6189db67fe6e')) {
                                itemSymbol = 'üçí'; // Ê´ªÊ°É
                            } else if (img.src.includes('4c463ed4ba5987c44f383bafa186ddd9')) {
                                itemSymbol = 'üçì'; // ËçâËéì
                            } else if (img.src.includes('e706a23d838d46d6752139259103ae48')) {
                                // Â∞çÊñºÁ¨¨‰∫åÁ®ÆÂúñÁâáÔºåÊàëÂÄëÈúÄË¶ÅÊ†πÊìö‰ΩçÁΩÆÊàñÂÖ∂‰ªñÊñπÂºè‰æÜÁ¢∫ÂÆöÂÖ∑È´îÁ¨¶Ëôü
                                // Êö´ÊôÇ‰ΩøÁî®ËçâËéì‰ΩúÁÇ∫‰ª£Ë°®
                                itemSymbol = 'üçì';
                            } else if (img.src.includes('43455278054c88bcf23c98a22c310930')) {
                                itemSymbol = 'üçá'; // Ëë°ËêÑ
                            } else if (img.src.includes('05a321e41dd66b31d74b8ccd74f00c1b')) {
                                itemSymbol = 'üçå'; // È¶ôËïâ
                            } else if (img.src.includes('a35e9aa0e9f5a6af14e2572214b2d214')) {
                                itemSymbol = 'üçé'; // ËòãÊûú
                            } else {
                                itemSymbol = 'üçé'; // È†êË®≠ÁÇ∫ËòãÊûú
                            }
                        } else {
                            // ‰ΩøÁî®ÊñáÂ≠óÂÖßÂÆπ
                            itemSymbol = item.textContent;
                        }
                        
                        console.log(`  - È†ÖÁõÆ ${i}: ${itemSymbol} (ÂúñÁâá: ${img ? 'ÊòØ' : 'Âê¶'})`);
                        
                        if (itemSymbol === finalSymbol) {
                            targetIndex = i;
                            console.log(`‚úÖ ÊâæÂà∞ÁõÆÊ®ôÁ¨¶Ëôü ${finalSymbol} Âú®‰ΩçÁΩÆ ${i}`);
                            break;
                        }
                    }
                    
                    // Ë®àÁÆóÈúÄË¶ÅÁßªÂãïÁöÑË∑ùÈõ¢
                    const itemHeight = 200; // ÊØèÂÄãÈ†ÖÁõÆÈ´òÂ∫¶
                    const targetPosition = -(targetIndex * itemHeight);
                    
                    console.log(`üéØ ËΩâËº™ ${index + 1} ÁßªÂãïÂà∞‰ΩçÁΩÆ ${targetIndex}ÔºåË∑ùÈõ¢ ${targetPosition}px`);
                    
                    // Ê∑ªÂä†ÂãïÁï´
                    strip.style.transition = `transform ${spinDuration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`;
                    strip.style.transform = `translateY(${targetPosition}px)`;
                    
                    console.log(`üé¨ ËΩâËº™ ${index + 1} ÂãïÁï´Â∑≤ÂïüÂãï`);
                    
                }, delays[index]);
            });

            // ÂãïÁï´ÂÆåÊàêÂæåÊ™¢Êü•ÁµêÊûú
            setTimeout(() => {
                console.log('üé¨ ÂãïÁï´ÂÆåÊàêÔºåÊ™¢Êü•ÁµêÊûú');
                checkResult(resultSymbols);
            }, spinDuration + Math.max(...delays));
        }

        // ‰∏ÄËà¨‰∏ãÊ≥®ËΩâÂãï
        function spinNormal() {
            if (gameState.isSpinning) return;
            
            const betCost = 5000 * gameState.betMultiplier; // ÂÄçÊï∏ÂΩ±ÈüøÊäïÂÖ•ÈáëÈ°ç
            
                            if (!coinSystem || coinSystem.getCoins() < betCost) {
                    showResult(`ÈáëÂπ£‰∏çË∂≥ÔºÅÈúÄË¶Å${betCost.toLocaleString()}ü™ôÔºåË´ãÂÖàÂÖåÊèõÊòüÊòüÁç≤ÂæóÈáëÂπ£`, 'lose');
                    return;
                }

            // Êí≠ÊîæËΩâÂãïÈü≥Êïà
            soundSystem.playSpinSound();

            // Êâ£Èô§Âõ∫ÂÆöÈáëÈ°ç
            coinSystem.useCoins(betCost);
            gameState.isSpinning = true;
            gameState.totalGames++;
            gameState.currentBet = betCost; // ‰øùÂ≠òÁï∂Ââç‰∏ãÊ≥®ÈáëÈ°ç
            gameState.isNormalBet = true; // Ê®ôË®òÁÇ∫‰∏ÄËà¨‰∏ãÊ≥®

            const allInButton = document.getElementById('allInButton');
            const normalSpinButton = document.getElementById('normalSpinButton');
            allInButton.disabled = true;
            normalSpinButton.disabled = true;
            allInButton.textContent = 'üé∞ ËΩâÂãï‰∏≠...';
            normalSpinButton.textContent = 'üé∞ ËΩâÂãï‰∏≠...';

            // ÈáçÊñ∞ÁîüÊàêËΩâËº™Ê¢ù‰ª•Á¢∫‰øùÊúâ‰∏çÂêåÁöÑÁ¨¶Ëôü
            regenerateReelStrips();

            // Ê†πÊìö‰∏ãÊ≥®ÂÄçÊï∏Ë™øÊï¥Áç≤ÂãùÊ©üÁéá - ËÆìÁé©ÂÆ∂ÊúâÊ©üÊúÉÁç≤Âãù
            let winChance = 0.40; // Âü∫Á§é40%Áç≤ÂãùÊ©üÁéá
            
            // ÈÄ£Á∫åÁç≤ÂãùÂä†Êàê - Â¢ûÂä†ÈÄ£Á∫åÁç≤ÂãùÁöÑÊ©üÁéá
            if (gameState.streak >= 1) {
                winChance += 0.03; // 1ÈÄ£ÂãùÔºö+3%Ê©üÁéá
            }
            if (gameState.streak >= 2) {
                winChance += 0.05; // 2ÈÄ£ÂãùÔºö+5%Ê©üÁéá
            }
            if (gameState.streak >= 3) {
                winChance += 0.07; // 3ÈÄ£ÂãùÔºö+7%Ê©üÁéá
            }
            if (gameState.streak >= 5) {
                winChance += 0.10; // 5ÈÄ£ÂãùÔºö+10%Ê©üÁéá
            }
            
            // Â¶ÇÊûúÊòØ‰∏ÄËà¨‰∏ãÊ≥®‰∏îÂÄçÊï∏ËºÉÈ´òÔºåÈÅ©Â∫¶Èôç‰ΩéÁç≤ÂãùÊ©üÁéá
            if (gameState.betMultiplier >= 10) {
                winChance = Math.max(0.25, winChance - 0.15); // 10ÂÄç‰ª•‰∏äÔºöÊúÄ‰Ωé25%Áç≤ÂãùÊ©üÁéá
            } else if (gameState.betMultiplier >= 6) {
                winChance = Math.max(0.30, winChance - 0.10); // 6ÂÄç‰ª•‰∏äÔºöÊúÄ‰Ωé30%Áç≤ÂãùÊ©üÁéá
            } else if (gameState.betMultiplier >= 4) {
                winChance = Math.max(0.35, winChance - 0.05); // 4ÂÄç‰ª•‰∏äÔºöÊúÄ‰Ωé35%Áç≤ÂãùÊ©üÁéá
            } else if (gameState.betMultiplier >= 2) {
                winChance = Math.max(0.40, winChance - 0.05); // 2ÂÄç‰ª•‰∏äÔºöÊúÄ‰Ωé40%Áç≤ÂãùÊ©üÁéá
            }
            
            const shouldWin = Math.random() < winChance;
            let resultSymbols = [];
            
            if (shouldWin) {
                // Áç≤ÂãùÔºö‰∏âÂÄãÁõ∏ÂêåÁ¨¶Ëôü
                const winningSymbol = getRandomSymbol();
                resultSymbols = [winningSymbol, winningSymbol, winningSymbol];
            } else {
                // Â§±ÊïóÔºö‰∏çÂêåÁ¨¶Ëôü
                const symbols = Object.keys(symbolWeights);
                resultSymbols = [
                    symbols[Math.floor(Math.random() * symbols.length)],
                    symbols[Math.floor(Math.random() * symbols.length)],
                    symbols[Math.floor(Math.random() * symbols.length)]
                ];
                
                // Á¢∫‰øù‰∏çÊòØ‰∏âÂÄãÁõ∏Âêå
                while (resultSymbols[0] === resultSymbols[1] && resultSymbols[1] === resultSymbols[2]) {
                    resultSymbols[2] = symbols[Math.floor(Math.random() * symbols.length)];
                }
            }

            console.log('üé∞ ÈñãÂßã‰∏ÄËà¨‰∏ãÊ≥®ËΩâÂãïÔºåÁµêÊûúÁ¨¶Ëôü:', resultSymbols);
            
            // Á¢∫‰øùËΩâËº™Ê¢ùÂ∑≤ÁîüÊàê
            setTimeout(() => {
                // ÈñãÂßãÂãïÁï´
                animateSpin(resultSymbols);
            }, 100);
        }

        // Ê™¢Êü•ÁµêÊûú
        function checkResult(symbols) {
            const isWin = symbols[0] === symbols[1] && symbols[1] === symbols[2];
            
            if (isWin) {
                // Êí≠ÊîæÊàêÂäüÈü≥Êïà
                soundSystem.playWinSound();
                
                const symbol = symbols[0];
                const baseMultiplier = rewards[symbol] || 2;
                // ÁçéÂãµÂü∫ÊñºÂØ¶Èöõ‰∏ãÊ≥®ÁöÑÈáëÂπ£Êï∏ÈáèÔºå‰∏¶ÊáâÁî®ÁçéÂãµÂÄçÊï∏
                const betAmount = gameState.currentBet;
                let winAmount;
                
                if (gameState.isNormalBet) {
                    // ‰∏ÄËà¨‰∏ãÊ≥®ÔºöÁçéÂãµ = ‰∏ãÊ≥®ÈáëÈ°ç √ó Á¨¶ËôüÂÄçÊï∏
                    winAmount = betAmount * baseMultiplier;
                } else {
                    // Ë≥≠‰∏äÊâÄÊúâÈáëÂπ£ÔºöÁçéÂãµ = ‰∏ãÊ≥®ÈáëÈ°ç √ó Á¨¶ËôüÂÄçÊï∏
                    winAmount = betAmount * baseMultiplier;
                }
                
                coinSystem.addCoins(winAmount);
                gameState.streak++;
                gameState.totalWins++;
                
                // Êõ¥Êñ∞ÊúÄÈ´òÈÄ£ÂãùË®òÈåÑ
                if (gameState.streak > gameState.maxStreak) {
                    gameState.maxStreak = gameState.streak;
                }
                
                // Âà§Êñ∑ÊòØÂê¶ÁÇ∫Â§ßÁçéÔºàÁçéÂãµË∂ÖÈÅé300000Ôºâ
                const isJackpot = winAmount >= 300000;
                
                if (isJackpot) {
                    showJackpotModal(symbol, winAmount, baseMultiplier);
                } else {
                    showResult(`üéâ Áç≤ÂãùÔºÅ${symbol} x${baseMultiplier}ÂÄç = +${winAmount.toLocaleString()}ü™ô`, 'win');
                }
                
                // ÈÄ£Á∫åÁç≤ÂãùÁçéÂãµ - Â¢ûÂä†Êõ¥Â§öÁ≠âÁ¥öÂíåÊõ¥È´òÁçéÂãµ
                if (gameState.streak >= 2) {
                    const bonus = Math.floor(winAmount * 0.15); // Âæû10%ÊèêÂçáÂà∞15%
                    coinSystem.addCoins(bonus);
                    showResult(`üî• ÈÄ£Á∫åÁç≤ÂãùÁçéÂãµÔºÅ+${bonus.toLocaleString()}ü™ô`, 'win');
                    playStreakSound(2);
                } else if (gameState.streak >= 3) {
                    const bonus = Math.floor(winAmount * 0.25); // Âæû15%ÊèêÂçáÂà∞25%
                    coinSystem.addCoins(bonus);
                    showResult(`üî•üî• ‰∏âÈÄ£ÂãùÁçéÂãµÔºÅ+${bonus.toLocaleString()}ü™ô`, 'win');
                    playStreakSound(3);
                } else if (gameState.streak >= 4) {
                    const bonus = Math.floor(winAmount * 0.35); // Êñ∞Â¢û4ÈÄ£ÂãùÁçéÂãµ
                    coinSystem.addCoins(bonus);
                    showResult(`üî•üî•üî• ÂõõÈÄ£ÂãùÁçéÂãµÔºÅ+${bonus.toLocaleString()}ü™ô`, 'win');
                    playStreakSound(4);
                } else if (gameState.streak >= 5) {
                    const bonus = Math.floor(winAmount * 0.50); // Âæû25%ÊèêÂçáÂà∞50%
                    coinSystem.addCoins(bonus);
                    showResult(`üî•üî•üî•üî• ‰∫îÈÄ£ÂãùË∂ÖÁ¥öÁçéÂãµÔºÅ+${bonus.toLocaleString()}ü™ô`, 'win');
                    playStreakSound(5);
                } else if (gameState.streak >= 7) {
                    const bonus = Math.floor(winAmount * 0.75); // Êñ∞Â¢û7ÈÄ£ÂãùÁçéÂãµ
                    coinSystem.addCoins(bonus);
                    showResult(`üî•üî•üî•üî•üî• ‰∏ÉÈÄ£ÂãùÂÇ≥Â•áÁçéÂãµÔºÅ+${bonus.toLocaleString()}ü™ô`, 'win');
                    playStreakSound(7);
                } else if (gameState.streak >= 10) {
                    const bonus = Math.floor(winAmount * 1.0); // Êñ∞Â¢û10ÈÄ£ÂãùÁçéÂãµ
                    coinSystem.addCoins(bonus);
                    showResult(`üî•üî•üî•üî•üî•üî• ÂçÅÈÄ£ÂãùÁ•ûË©±ÁçéÂãµÔºÅ+${bonus.toLocaleString()}ü™ô`, 'win');
                    playStreakSound(10);
                }
                
                // Ê∑ªÂä†Áç≤ÂãùÂãïÁï´
                document.querySelector('.slot-display').classList.add('win-animation');
                setTimeout(() => {
                    document.querySelector('.slot-display').classList.remove('win-animation');
                }, 500);
                
            } else {
                // Êí≠ÊîæÂ§±ÊïóÈü≥ÊïàÔºàÂÉÖÊâãÂãïËΩâÂãïÔºâ
                soundSystem.playLoseSound();
                
                gameState.streak = 0;
                showResult('üòî Êú™‰∏≠ÁçéÔºåÂÜçË©¶‰∏ÄÊ¨°ÔºÅ', 'lose');
            }

            // ÈáçÁΩÆÈÅäÊà≤ÁãÄÊÖã
            gameState.isSpinning = false;
            const allInButton = document.getElementById('allInButton');
            const normalSpinButton = document.getElementById('normalSpinButton');
            allInButton.disabled = false;
            normalSpinButton.disabled = false;
            allInButton.textContent = 'üé∞ Ë≥≠‰∏äÊâÄÊúâÈáëÂπ£';
            const normalBetCost = 5000 * gameState.betMultiplier;
            normalSpinButton.textContent = `üé∞ ‰∏ÄËà¨‰∏ãÊ≥® (${normalBetCost.toLocaleString()}ü™ô)`;
            
            updateDisplay();
            saveGameData();
        }

        // È°ØÁ§∫ÈÅäÊà≤Ë™™Êòé
        function showHelpModal() {
            const modal = document.createElement('div');
            modal.className = 'help-modal';
            
            modal.innerHTML = `
                <div class="help-content">
                    <h2 class="help-title">üìã ÈÅäÊà≤Ë™™Êòé</h2>
                    
                    <div class="help-section">
                        <h3>üé∞ ÈÅäÊà≤Ë¶èÂâá</h3>
                        <p>ËΩâÂá∫‰∏âÂÄãÁõ∏ÂêåÁ¨¶ËôüÂç≥ÂèØÁç≤ÂãùÔºÅÊäïÂÖ•ÈáëÂπ£Ë∂äÂ§öÔºåÁç≤ÂãùÁçéÂãµË∂äÈ´ò„ÄÇ</p>
                    </div>
                    
                    <div class="help-section">
                        <h3>üí∞ ‰∏ãÊ≥®ÂÄçÊï∏</h3>
                        <p>‚Ä¢ 1ÂÄçÔºöÊäïÂÖ• 5,000ÈáëÂπ£</p>
                        <p>‚Ä¢ 2ÂÄçÔºöÊäïÂÖ• 10,000ÈáëÂπ£</p>
                        <p>‚Ä¢ 4ÂÄçÔºöÊäïÂÖ• 20,000ÈáëÂπ£</p>
                        <p>‚Ä¢ 6ÂÄçÔºöÊäïÂÖ• 30,000ÈáëÂπ£</p>
                        <p>‚Ä¢ 10ÂÄçÔºöÊäïÂÖ• 50,000ÈáëÂπ£</p>
                    </div>
                    
                    <div class="help-section">
                        <h3>üçé Á¨¶ËôüÁçéÂãµ</h3>
                        <div class="symbol-list">
                            <div class="symbol-item">
                                <span class="symbol">üçé</span>
                                <span class="reward">1.2ÂÄç</span>
                                <span class="description">ËòãÊûú - ÊúÄÂ∏∏Ë¶ã</span>
                            </div>
                            <div class="symbol-item">
                                <span class="symbol">üçä</span>
                                <span class="reward">1.5ÂÄç</span>
                                <span class="description">Ê©òÂ≠ê - Â∏∏Ë¶ã</span>
                            </div>
                            <div class="symbol-item">
                                <span class="symbol">üçá</span>
                                <span class="reward">1.8ÂÄç</span>
                                <span class="description">Ëë°ËêÑ - ËºÉÂ∏∏Ë¶ã</span>
                            </div>
                            <div class="symbol-item">
                                <span class="symbol">üçì</span>
                                <span class="reward">2.0ÂÄç</span>
                                <span class="description">ËçâËéì - ‰∏≠Á≠â</span>
                            </div>
                            <div class="symbol-item">
                                <span class="symbol">üçå</span>
                                <span class="reward">2.5ÂÄç</span>
                                <span class="description">È¶ôËïâ - ‰∏≠Á≠â</span>
                            </div>
                            <div class="symbol-item">
                                <span class="symbol">üçí</span>
                                <span class="reward">3.0ÂÄç</span>
                                <span class="description">Ê´ªÊ°É - ËºÉÁ®ÄÊúâ</span>
                            </div>
                            <div class="symbol-item">
                                <span class="symbol">üçë</span>
                                <span class="reward">4.0ÂÄç</span>
                                <span class="description">Ê°ÉÂ≠ê - Á®ÄÊúâ</span>
                            </div>
                            <div class="symbol-item">
                                <span class="symbol">ü•ù</span>
                                <span class="reward">10.0ÂÄç</span>
                                <span class="description">Â•áÁï∞Êûú - ÊúÄÁ®ÄÊúâ</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h3>üî• ÈÄ£Á∫åÁç≤ÂãùÁçéÂãµ</h3>
                        <p>‚Ä¢ 2ÈÄ£ÂãùÔºöÈ°çÂ§ñ15%ÁçéÂãµ</p>
                        <p>‚Ä¢ 3ÈÄ£ÂãùÔºöÈ°çÂ§ñ25%ÁçéÂãµ</p>
                        <p>‚Ä¢ 4ÈÄ£ÂãùÔºöÈ°çÂ§ñ35%ÁçéÂãµ</p>
                        <p>‚Ä¢ 5ÈÄ£ÂãùÔºöÈ°çÂ§ñ50%ÁçéÂãµ</p>
                        <p>‚Ä¢ 7ÈÄ£ÂãùÔºöÈ°çÂ§ñ75%ÁçéÂãµ</p>
                        <p>‚Ä¢ 10ÈÄ£ÂãùÔºöÈ°çÂ§ñ100%ÁçéÂãµ</p>
                        <p><strong>üí° ÈÄ£Á∫åÁç≤ÂãùÊôÇÊúÉÂ¢ûÂä†‰∏ãÊ¨°Áç≤ÂãùÊ©üÁéáÔºÅ</strong></p>
                    </div>
                    
                    <div class="help-section">
                        <h3>üèÜ Â§ßÁçéÁ≥ªÁµ±</h3>
                        <p>‚Ä¢ ÁçéÂãµË∂ÖÈÅé300,000ÈáëÂπ£ÊôÇËß∏ÁôºÂ§ßÁçé</p>
                        <p>‚Ä¢ Â§ßÁçéÊúÉÊí≠ÊîæÁâπÊÆäÈü≥ÊïàÂíåÂΩàÁ™ó</p>
                    </div>
                    
                    <div class="help-section">
                        <h3>ü§ñ Ëá™ÂãïËΩâÂãïÂäüËÉΩ</h3>
                        <p>‚Ä¢ ‰ΩøÁî®ÊªëÊ°øË®≠ÂÆöËΩâÂãïÊ¨°Êï∏Ôºà1-100Ê¨°ÔºâÂíåÈñìÈöîÊôÇÈñìÔºà10-60ÁßíÔºâ</p>
                        <p>‚Ä¢ Á≥ªÁµ±ÊúÉËá™ÂãïÂü∑Ë°åËΩâÂãïÔºåÁÑ°ÈúÄÊâãÂãïÈªûÊìä</p>
                        <p>‚Ä¢ Ëá™ÂãïËΩâÂãïÊúüÈñìÊúÉÈ°ØÁ§∫ÂØ¶ÊôÇÈÄ≤Â∫¶ÂíåÁç≤ÂãùÁéá</p>
                        <p>‚Ä¢ ÈáëÂπ£‰∏çË∂≥ÊôÇÊúÉËá™ÂãïÂÅúÊ≠¢</p>
                        <p>‚Ä¢ ÂèØÈö®ÊôÇÊâãÂãïÂÅúÊ≠¢Ëá™ÂãïËΩâÂãï</p>
                        <p>‚Ä¢ ÂèØÈÅ∏ÊìáÊòØÂê¶Êí≠ÊîæËΩâÂãïÈü≥Êïà</p>
                        <p><strong>‚ö†Ô∏è Ê≥®ÊÑèÔºöËá™ÂãïËΩâÂãïÁöÑÁç≤ÂãùÊ©üÁéáËºÉ‰ΩéÔºåÊõ¥ÂÖ∑ÊåëÊà∞ÊÄß</strong></p>
                    </div>
                    
                    <button class="help-close" onclick="this.parentElement.parentElement.remove()">
                        ÊàëÁü•ÈÅì‰∫Ü
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // È°ØÁ§∫Â§ßÁçéÂΩàÁ™ó
        function showJackpotModal(symbol, winAmount, multiplier) {
            // Êö´ÂÅúÈÅäÊà≤
            pauseGame();
            
            const modal = document.createElement('div');
            modal.className = 'jackpot-modal';
            
            modal.innerHTML = `
                <div class="jackpot-content">
                    <div class="jackpot-title">üéâ Â§ßÁçéÔºÅüéâ</div>
                    <div class="jackpot-symbol">${symbol}</div>
                    <div class="jackpot-amount">+${winAmount.toLocaleString()}ü™ô</div>
                    <div class="jackpot-message">
                        ÊÅ≠ÂñúÊÇ®Áç≤ÂæóÂ§ßÁçéÔºÅ<br>
                        Á¨¶Ëôü: ${symbol} x${multiplier}ÂÄç
                    </div>
                    <button class="jackpot-close" onclick="closeJackpotModal(this)">
                        Â§™Ê£í‰∫ÜÔºÅ
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Êí≠ÊîæÂ§ßÁçéÈü≥Êïà
            soundSystem.playJackpotSound();
            
            // 5ÁßíÂæåËá™ÂãïÈóúÈñâ
            setTimeout(() => {
                if (modal.parentElement) {
                    closeJackpotModal(modal.querySelector('.jackpot-close'));
                }
            }, 5000);
        }

        // ÈóúÈñâÂ§ßÁçéÂΩàÁ™ó‰∏¶ÊÅ¢Âæ©ÈÅäÊà≤
        function closeJackpotModal(button) {
            const modal = button.parentElement.parentElement;
            if (modal && modal.parentElement) {
                modal.remove();
                // ÊÅ¢Âæ©ÈÅäÊà≤
                resumeGame();
            }
        }

        // Êö´ÂÅúÈÅäÊà≤
        function pauseGame() {
            // Á¶ÅÁî®ÈÅäÊà≤Áõ∏ÈóúÊåâÈàï
            const allInButton = document.getElementById('allInButton');
            const normalSpinButton = document.getElementById('normalSpinButton');
            const startAutoSpinBtn = document.getElementById('startAutoSpinBtn');
            const stopAutoSpinBtn = document.getElementById('stopAutoSpinBtn');
            
            if (allInButton) allInButton.disabled = true;
            if (normalSpinButton) normalSpinButton.disabled = true;
            if (startAutoSpinBtn) startAutoSpinBtn.disabled = true;
            if (stopAutoSpinBtn) stopAutoSpinBtn.disabled = true;
            
            // Êö´ÂÅúËá™ÂãïËΩâÂãïÔºàÂ¶ÇÊûúÊ≠£Âú®ÈÄ≤Ë°åÔºâ
            if (gameState.autoSpin.isActive) {
                gameState.autoSpin.isPaused = true;
            }
            
            console.log('‚è∏Ô∏è ÈÅäÊà≤Â∑≤Êö´ÂÅú');
        }

        // ÊÅ¢Âæ©ÈÅäÊà≤
        function resumeGame() {
            // ÈáçÊñ∞ÂïüÁî®ÊåâÈàï
            const allInButton = document.getElementById('allInButton');
            const normalSpinButton = document.getElementById('normalSpinButton');
            const startAutoSpinBtn = document.getElementById('startAutoSpinBtn');
            const stopAutoSpinBtn = document.getElementById('stopAutoSpinBtn');
            
            if (allInButton) allInButton.disabled = false;
            if (normalSpinButton) normalSpinButton.disabled = false;
            if (startAutoSpinBtn) startAutoSpinBtn.disabled = false;
            if (stopAutoSpinBtn) stopAutoSpinBtn.disabled = false;
            
            // ÊÅ¢Âæ©Ëá™ÂãïËΩâÂãïÔºàÂ¶ÇÊûú‰πãÂâçË¢´Êö´ÂÅúÔºâ
            if (gameState.autoSpin.isActive && gameState.autoSpin.isPaused) {
                gameState.autoSpin.isPaused = false;
                console.log('‚ñ∂Ô∏è Ëá™ÂãïËΩâÂãïÂ∑≤ÊÅ¢Âæ©');
                // ÁπºÁ∫åÂü∑Ë°åËá™ÂãïËΩâÂãïÔºàÂ¶ÇÊûú‰∏çÂú®ËΩâÂãï‰∏≠Ôºâ
                if (!gameState.isSpinning) {
                    setTimeout(() => {
                        performAutoSpin();
                    }, 100);
                }
            }
            
            console.log('‚ñ∂Ô∏è ÈÅäÊà≤Â∑≤ÊÅ¢Âæ©');
        }

        // È°ØÁ§∫ÁµêÊûú
        function showResult(message, type) {
            const resultText = document.getElementById('resultText');
            resultText.textContent = message;
            resultText.className = `result-text ${type}`;
            
            // Ê∏ÖÈô§‰πãÂâçÁöÑÁµêÊûú
            setTimeout(() => {
                resultText.textContent = '';
                resultText.className = 'result-text';
            }, 3000);
        }

        // È°ØÁ§∫ÂÖåÊèõÂïÜÂüé
        function showExchangeShop() {
            // ÈáçÊñ∞ËºâÂÖ•ÊúÄÊñ∞ÊòüÊòüÊï∏
            if (starSystem) {
                starSystem.loadTotalStars();
            }
            
            const currentCoins = coinSystem ? coinSystem.getCoins() : 0;
            const currentStars = starSystem ? starSystem.getStars() : 0;
            
            console.log('‚≠ê ÈñãÂïüÂÖåÊèõÂïÜÂüéÔºåÁï∂ÂâçÁ∏ΩÊòüÊòüÊï∏:', currentStars);
            
            // Âª∫Á´ãÂïÜÂüéÊ®°ÊÖãÊ°Ü
            const modal = document.createElement('div');
            modal.className = 'exchange-modal';
            
            modal.innerHTML = `
                <div class="exchange-content">
                    <div class="bank-header">
                        <h2 class="exchange-title">üè¶ ÊòüÊòüÈäÄË°å</h2>
                    </div>
                    
                    <div class="bank-balance">
                        <div class="balance-title">Áï∂ÂâçÈ§òÈ°ç</div>
                        <div class="balance-amount">${currentStars} ‚≠ê</div>
                        <div class="balance-label">Á∏ΩÊòüÊòüÊï∏</div>
                    </div>
                    
                    <div class="bank-balance">
                        <div class="balance-title">ÈáëÂπ£È§òÈ°ç</div>
                        <div class="balance-amount">${currentCoins.toLocaleString()} ü™ô</div>
                        <div class="balance-label">ÂèØÁî®ÈáëÂπ£</div>
                    </div>
                    
                    <div class="bank-section">
                        <div class="section-title">üí± ÊòüÊòüÂÖåÊèõÈáëÂπ£</div>
                        <div class="bank-buttons">
                            <button class="bank-btn" id="starToCoin1Btn">
                                ‚≠ê 1ÊòüÊòü = 10,000ü™ô
                            </button>
                            <button class="bank-btn" id="starToCoin10Btn">
                                ‚≠ê 10ÊòüÊòü = 100,000ü™ô
                            </button>
                            <button class="bank-btn" id="starToCoin20Btn">
                                ‚≠ê 20ÊòüÊòü = 220,000ü™ô
                            </button>
                            <button class="bank-btn" id="starToCoin50Btn">
                                ‚≠ê 50ÊòüÊòü = 600,000ü™ô
                            </button>
                        </div>
                    </div>
                    
                    <div class="bank-divider"></div>
                    
                    <div class="bank-section">
                        <div class="section-title">üí± ÈáëÂπ£ÂÖåÊèõÊòüÊòü</div>
                        <div class="bank-buttons">
                            <button class="bank-btn" id="coinToStar10Btn">
                                ü™ô 1,000Ëê¨ = ‚≠ê 10ÊòüÊòü
                            </button>
                            <button class="bank-btn" id="coinToStar50Btn">
                                ü™ô 5,000Ëê¨ = ‚≠ê 50ÊòüÊòü
                            </button>
                            <button class="bank-btn" id="coinToStar100Btn">
                                ü™ô 1ÂÑÑ = ‚≠ê 100ÊòüÊòü
                            </button>
                            <button class="bank-btn" id="coinToStar200Btn">
                                ü™ô 2ÂÑÑ = ‚≠ê 200ÊòüÊòü
                            </button>
                        </div>
                    </div>
                    
                    <button class="bank-close" id="closeShopBtn">ÈóúÈñâÈäÄË°å</button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // ÊòüÊòüÊèõÈáëÂπ£ÂáΩÊï∏
            function exchangeStarsToCoins(starAmount, coinAmount) {
                if (starSystem && starSystem.getStars() >= starAmount) {
                    // Ë®àÁÆóÈúÄË¶ÅÂæûÂêÑÂÄãÁ≥ªÁµ±Êâ£Èô§ÁöÑÊòüÊòü
                    let remainingStars = starAmount;
                    
                    // ÂÑ™ÂÖàÂæû StarRewardSystem Êâ£Èô§ÊòüÊòü
                    if (window.StarRewardSystem && window.StarRewardSystem.getStars() > 0) {
                        const currentStarRewardStars = window.StarRewardSystem.getStars();
                        const deductFromStarReward = Math.min(remainingStars, currentStarRewardStars);
                        window.StarRewardSystem.addStars(-deductFromStarReward);
                        remainingStars -= deductFromStarReward;
                    }
                    
                    // Â¶ÇÊûúÈÇÑÈúÄË¶ÅÊâ£Èô§ÊòüÊòüÔºåÂæû localStorage Êâ£Èô§
                    if (remainingStars > 0) {
                        try {
                            const savedStars = localStorage.getItem('totalStars');
                            if (savedStars) {
                                const currentStars = parseInt(savedStars);
                                const deductFromLocalStorage = Math.min(remainingStars, currentStars);
                                if (deductFromLocalStorage > 0) {
                                    localStorage.setItem('totalStars', (currentStars - deductFromLocalStorage).toString());
                                }
                            }
                        } catch (error) {
                            console.log('Êâ£Èô§ÂÖ∂‰ªñÊòüÊòüÁ≥ªÁµ±Â§±Êïó:', error);
                        }
                    }
                    
                    // ÈáçÊñ∞ËºâÂÖ•Á∏ΩÊòüÊòüÊï∏
                    starSystem.loadTotalStars();
                    
                    // Â¢ûÂä†ÈáëÂπ£
                    coinSystem.addCoins(coinAmount);
                    
                    // È°ØÁ§∫ÂÖåÊèõÊàêÂäüË®äÊÅØ
                    showExchangeNotification(coinAmount, false);
                    
                    // Êõ¥Êñ∞Ê®°ÊÖãÊ°ÜÈ°ØÁ§∫
                    updateModalDisplay();
                } else {
                    alert(`‚ùå Á∏ΩÊòüÊòü‰∏çË∂≥ÔºÅÈúÄË¶ÅËá≥Â∞ë${starAmount}È°ÜÊòüÊòüÊâçËÉΩÂÖåÊèõ„ÄÇ`);
                }
            }
            
            // ÈáëÂπ£ÊèõÊòüÊòüÂáΩÊï∏
            function exchangeCoinsToStars(coinAmount, starAmount) {
                if (coinSystem && coinSystem.getCoins() >= coinAmount) {
                    // Êâ£Èô§ÈáëÂπ£
                    coinSystem.useCoins(coinAmount);
                    
                    // Â¢ûÂä†ÊòüÊòüÂà∞ StarRewardSystem
                    if (window.StarRewardSystem) {
                        window.StarRewardSystem.addStars(starAmount);
                    }
                    
                    // ÂêåÊôÇÊõ¥Êñ∞Á∏ΩÊòüÊòüÁ≥ªÁµ±
                    try {
                        const currentTotalStars = parseInt(localStorage.getItem('totalStars')) || 0;
                        localStorage.setItem('totalStars', (currentTotalStars + starAmount).toString());
                    } catch (error) {
                        console.log('Êõ¥Êñ∞Á∏ΩÊòüÊòüÁ≥ªÁµ±Â§±Êïó:', error);
                    }
                    
                    // ÈáçÊñ∞ËºâÂÖ•Á∏ΩÊòüÊòüÊï∏
                    starSystem.loadTotalStars();
                    
                    // È°ØÁ§∫ÂÖåÊèõÊàêÂäüË®äÊÅØ
                    showExchangeNotification(starAmount, true);
                    
                    // Êõ¥Êñ∞Ê®°ÊÖãÊ°ÜÈ°ØÁ§∫
                    updateModalDisplay();
                } else {
                    alert(`‚ùå ÈáëÂπ£‰∏çË∂≥ÔºÅÈúÄË¶ÅËá≥Â∞ë${coinAmount.toLocaleString()}ÈáëÂπ£ÊâçËÉΩÂÖåÊèõ„ÄÇ`);
                }
            }
            
            // Êõ¥Êñ∞Ê®°ÊÖãÊ°ÜÈ°ØÁ§∫
            function updateModalDisplay() {
                // ÈáçÊñ∞ËºâÂÖ•ÊúÄÊñ∞ÊòüÊòüÊï∏
                if (starSystem) {
                    starSystem.loadTotalStars();
                }
                
                const starsDisplay = modal.querySelector('.exchange-stats div:first-child div:nth-child(2)');
                const coinsDisplay = modal.querySelector('.exchange-stats div:nth-child(2) div:nth-child(2)');
                if (starsDisplay) starsDisplay.textContent = starSystem.getStars().toLocaleString();
                if (coinsDisplay) coinsDisplay.textContent = coinSystem.getCoins().toLocaleString();
                
                console.log('‚≠ê ÂÖåÊèõÂïÜÂüéÈ°ØÁ§∫Â∑≤Êõ¥Êñ∞ÔºåÁ∏ΩÊòüÊòüÊï∏:', starSystem.getStars());
            }
            
            // ÊòüÊòüÊèõÈáëÂπ£ÊåâÈàï‰∫ã‰ª∂
            const starToCoin1Btn = modal.querySelector('#starToCoin1Btn');
            const starToCoin10Btn = modal.querySelector('#starToCoin10Btn');
            const starToCoin20Btn = modal.querySelector('#starToCoin20Btn');
            const starToCoin50Btn = modal.querySelector('#starToCoin50Btn');
            
            starToCoin1Btn.addEventListener('click', () => exchangeStarsToCoins(1, 10000));
            starToCoin10Btn.addEventListener('click', () => exchangeStarsToCoins(10, 100000));
            starToCoin20Btn.addEventListener('click', () => exchangeStarsToCoins(20, 220000));
            starToCoin50Btn.addEventListener('click', () => exchangeStarsToCoins(50, 600000));
            
            // ÈáëÂπ£ÊèõÊòüÊòüÊåâÈàï‰∫ã‰ª∂
            const coinToStar10Btn = modal.querySelector('#coinToStar10Btn');
            const coinToStar50Btn = modal.querySelector('#coinToStar50Btn');
            const coinToStar100Btn = modal.querySelector('#coinToStar100Btn');
            const coinToStar200Btn = modal.querySelector('#coinToStar200Btn');
            
            coinToStar10Btn.addEventListener('click', () => exchangeCoinsToStars(10000000, 10));
            coinToStar50Btn.addEventListener('click', () => exchangeCoinsToStars(50000000, 50));
            coinToStar100Btn.addEventListener('click', () => exchangeCoinsToStars(100000000, 100));
            coinToStar200Btn.addEventListener('click', () => exchangeCoinsToStars(200000000, 200));
            
            // ÈóúÈñâÊåâÈàï‰∫ã‰ª∂
            const closeBtn = modal.querySelector('#closeShopBtn');
            closeBtn.addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            // ÈªûÊìäËÉåÊôØÈóúÈñâ
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        }

        // È°ØÁ§∫ÂÖåÊèõÊàêÂäüÈÄöÁü•
        function showExchangeNotification(amount, isStarExchange = false) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, rgba(255, 193, 7, 0.95), rgba(255, 152, 0, 0.95));
                color: #000;
                padding: 20px 30px;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(255, 193, 7, 0.5);
                z-index: 10001;
                font-weight: bold;
                font-size: 1.2rem;
                text-align: center;
                font-family: 'Orbitron', monospace;
                animation: exchangePop 0.5s ease-out;
            `;
            
            if (isStarExchange) {
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <span style="font-size: 2rem;">ü™ô‚û°Ô∏è‚≠ê</span>
                        <div>
                            <div>ÈáëÂπ£ÂÖåÊèõÊàêÂäüÔºÅ</div>
                            <div style="font-size: 1rem; opacity: 0.8;">Áç≤Âæó ${amount} ÊòüÊòü</div>
                        </div>
                    </div>
                `;
            } else {
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <span style="font-size: 2rem;">‚≠ê‚û°Ô∏èü™ô</span>
                        <div>
                            <div>ÊòüÊòüÂÖåÊèõÊàêÂäüÔºÅ</div>
                            <div style="font-size: 1rem; opacity: 0.8;">Áç≤Âæó ${amount} ÈáëÂπ£</div>
                        </div>
                    </div>
                `;
            }
            
            // Âä†ÂÖ•ÂãïÁï´CSS
            const style = document.createElement('style');
            style.textContent = `
                @keyframes exchangePop {
                    0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
                    50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
                    100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            // 3ÁßíÂæåËá™ÂãïÁßªÈô§
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    document.body.removeChild(notification);
                }
                if (document.head.contains(style)) {
                    document.head.removeChild(style);
                }
            }, 3000);
        }

        // Ëá™ÂãïËΩâÂãïÂäüËÉΩ
        function startAutoSpin() {
            const spinCount = parseInt(document.getElementById('autoSpinCountSlider').value);
            const spinInterval = parseFloat(document.getElementById('autoSpinIntervalSlider').value);
            
            if (spinCount < 1 || spinCount > 100) {
                alert('ËΩâÂãïÊ¨°Êï∏ÂøÖÈ†àÂú®1-100‰πãÈñìÔºÅ');
                return;
            }
            
            if (spinInterval < 10 || spinInterval > 60) {
                alert('ÈñìÈöîÊôÇÈñìÂøÖÈ†àÂú®10-60Áßí‰πãÈñìÔºÅ');
                return;
            }
            
            // Ê™¢Êü•ÈáëÂπ£ÊòØÂê¶Ë∂≥Â§†
            const betCost = 5000 * gameState.betMultiplier;
            const totalCost = betCost * spinCount;
            const currentCoins = coinSystem.getCoins();
            
            if (currentCoins < totalCost) {
                alert(`ÈáëÂπ£‰∏çË∂≥ÔºÅÈúÄË¶Å${totalCost.toLocaleString()}ü™ôÔºåÁï∂ÂâçÂè™Êúâ${currentCoins.toLocaleString()}ü™ô`);
                return;
            }
            
            // ÈñãÂßãËá™ÂãïËΩâÂãï
            gameState.autoSpin.isActive = true;
            gameState.autoSpin.count = 0;
            gameState.autoSpin.totalCount = spinCount;
            gameState.autoSpin.wins = 0;
            gameState.autoSpin.losses = 0;
            
            // Êõ¥Êñ∞UI
            document.getElementById('startAutoSpinBtn').style.display = 'none';
            document.getElementById('stopAutoSpinBtn').style.display = 'inline-block';
            document.getElementById('autoSpinStatus').classList.add('running');
            
            // Á¶ÅÁî®ÊâãÂãïÊåâÈàï
            document.getElementById('allInButton').disabled = true;
            document.getElementById('normalSpinButton').disabled = true;
            
            // ÈñãÂßãÁ¨¨‰∏ÄÊ¨°ËΩâÂãï
            performAutoSpin();
            
            // Ë®≠ÂÆöÈñìÈöî
            gameState.autoSpin.interval = setInterval(() => {
                if (gameState.autoSpin.isActive && gameState.autoSpin.count < gameState.autoSpin.totalCount && !gameState.autoSpin.isPaused) {
                    performAutoSpin();
                } else if (gameState.autoSpin.count >= gameState.autoSpin.totalCount) {
                    stopAutoSpin();
                }
            }, spinInterval * 1000);
            
            console.log(`ü§ñ ÈñãÂßãËá™ÂãïËΩâÂãïÔºö${spinCount}Ê¨°ÔºåÈñìÈöî${spinInterval}Áßí`);
        }
        
        function stopAutoSpin() {
            if (gameState.autoSpin.interval) {
                clearInterval(gameState.autoSpin.interval);
                gameState.autoSpin.interval = null;
            }
            
            gameState.autoSpin.isActive = false;
            
            // Êõ¥Êñ∞UI
            document.getElementById('startAutoSpinBtn').style.display = 'inline-block';
            document.getElementById('stopAutoSpinBtn').style.display = 'none';
            document.getElementById('autoSpinStatus').classList.remove('running');
            
            // ÂïüÁî®ÊâãÂãïÊåâÈàï
            document.getElementById('allInButton').disabled = false;
            document.getElementById('normalSpinButton').disabled = false;
            
            // È°ØÁ§∫ÁµêÊûú
            const winRate = gameState.autoSpin.totalCount > 0 ? 
                Math.round((gameState.autoSpin.wins / gameState.autoSpin.totalCount) * 100) : 0;
            
            showResult(`ü§ñ Ëá™ÂãïËΩâÂãïÂÆåÊàêÔºÅÁç≤ÂãùÔºö${gameState.autoSpin.wins}Ê¨°ÔºåÂ§±ÊïóÔºö${gameState.autoSpin.losses}Ê¨°ÔºåÁç≤ÂãùÁéáÔºö${winRate}%`, 'win');
            
            console.log(`ü§ñ Ëá™ÂãïËΩâÂãïÂÅúÊ≠¢ÔºöÂÆåÊàê${gameState.autoSpin.count}Ê¨°ÔºåÁç≤Âãù${gameState.autoSpin.wins}Ê¨°`);
        }
        
        function performAutoSpin() {
            if (!gameState.autoSpin.isActive || gameState.isSpinning || gameState.autoSpin.isPaused) {
                return;
            }
            
            gameState.autoSpin.count++;
            
            // Êõ¥Êñ∞ÈÄ≤Â∫¶È°ØÁ§∫
            const progress = document.getElementById('autoSpinProgress');
            const winRate = gameState.autoSpin.count > 0 ? 
                Math.round((gameState.autoSpin.wins / gameState.autoSpin.count) * 100) : 0;
            progress.textContent = `ÈÄ≤Ë°å‰∏≠ ${gameState.autoSpin.count}/${gameState.autoSpin.totalCount} (Áç≤ÂãùÁéá: ${winRate}%)`;
            
            // Êí≠ÊîæËΩâÂãïÈü≥ÊïàÔºàÂ¶ÇÊûúÂïüÁî®Ôºâ
            const soundEnabled = document.getElementById('autoSpinSound').checked;
            if (soundEnabled) {
                soundSystem.playSpinSound();
            }
            
            // Âü∑Ë°åËΩâÂãï
            const betCost = 5000 * gameState.betMultiplier;
            
            if (!coinSystem.useCoins(betCost)) {
                stopAutoSpin();
                showResult('ü§ñ Ëá™ÂãïËΩâÂãïÂÅúÊ≠¢ÔºöÈáëÂπ£‰∏çË∂≥ÔºÅ', 'lose');
                return;
            }
            
            gameState.isSpinning = true;
            gameState.totalGames++;
            gameState.currentBet = betCost;
            gameState.isNormalBet = true;
            
            // ÈáçÊñ∞ÁîüÊàêËΩâËº™Ê¢ù
            regenerateReelStrips();
            
            // Ë®àÁÆóÁç≤ÂãùÊ©üÁéáÔºàËá™ÂãïËΩâÂãïÈôç‰ΩéÊ©üÁéáÔºâ
            let winChance = 0.30; // Âü∫Á§éÊ©üÁéá30%
            
            // ÈÄ£Á∫åÁç≤ÂãùÂä†ÊàêÔºàÈôç‰ΩéÂä†ÊàêÔºâ
            if (gameState.streak >= 1) winChance += 0.02; // Âæû3%Èôç‰ΩéÂà∞2%
            if (gameState.streak >= 2) winChance += 0.03; // Âæû5%Èôç‰ΩéÂà∞3%
            if (gameState.streak >= 3) winChance += 0.05; // Âæû7%Èôç‰ΩéÂà∞5%
            if (gameState.streak >= 5) winChance += 0.07; // Âæû10%Èôç‰ΩéÂà∞7%
            
            // ÂÄçÊï∏Ë™øÊï¥ÔºàÊõ¥Âö¥Ê†ºÁöÑË™øÊï¥Ôºâ
            if (gameState.betMultiplier >= 10) {
                winChance = Math.max(0.15, winChance - 0.20); // ÊúÄ‰Ωé15%
            } else if (gameState.betMultiplier >= 6) {
                winChance = Math.max(0.20, winChance - 0.15); // ÊúÄ‰Ωé20%
            } else if (gameState.betMultiplier >= 4) {
                winChance = Math.max(0.25, winChance - 0.10); // ÊúÄ‰Ωé25%
            } else if (gameState.betMultiplier >= 2) {
                winChance = Math.max(0.30, winChance - 0.05); // ÊúÄ‰Ωé30%
            }
            
            const shouldWin = Math.random() < winChance;
            let resultSymbols = [];
            
            if (shouldWin) {
                const winningSymbol = getRandomSymbol();
                resultSymbols = [winningSymbol, winningSymbol, winningSymbol];
            } else {
                const symbols = Object.keys(symbolWeights);
                resultSymbols = [
                    symbols[Math.floor(Math.random() * symbols.length)],
                    symbols[Math.floor(Math.random() * symbols.length)],
                    symbols[Math.floor(Math.random() * symbols.length)]
                ];
                
                while (resultSymbols[0] === resultSymbols[1] && resultSymbols[1] === resultSymbols[2]) {
                    resultSymbols[2] = symbols[Math.floor(Math.random() * symbols.length)];
                }
            }
            
            // Âü∑Ë°åÂãïÁï´
            setTimeout(() => {
                animateSpin(resultSymbols);
                
                // ÂãïÁï´ÂÆåÊàêÂæåÊ™¢Êü•ÁµêÊûú
                setTimeout(() => {
                    checkAutoSpinResult(resultSymbols);
                }, 2000 + 400);
            }, 100);
        }
        
        function checkAutoSpinResult(symbols) {
            const isWin = symbols[0] === symbols[1] && symbols[1] === symbols[2];
            
            if (isWin) {
                // Êí≠ÊîæÁç≤ÂãùÈü≥ÊïàÔºàÂ¶ÇÊûúÂïüÁî®Ôºâ
                // const soundEnabled = document.getElementById('autoSpinSound').checked;
                // if (soundEnabled) {
                //     soundSystem.playWinSound();
                // }
                
                gameState.autoSpin.wins++;
                const symbol = symbols[0];
                const baseMultiplier = rewards[symbol] || 2;
                const betAmount = gameState.currentBet;
                const winAmount = betAmount * baseMultiplier;
                
                coinSystem.addCoins(winAmount);
                gameState.streak++;
                gameState.totalWins++;
                
                // Êõ¥Êñ∞ÊúÄÈ´òÈÄ£ÂãùË®òÈåÑ
                if (gameState.streak > gameState.maxStreak) {
                    gameState.maxStreak = gameState.streak;
                }
                
                // Âà§Êñ∑ÊòØÂê¶ÁÇ∫Â§ßÁçéÔºàÁçéÂãµË∂ÖÈÅé300000Ôºâ
                const isJackpot = winAmount >= 300000;
                
                if (isJackpot) {
                    showJackpotModal(symbol, winAmount, baseMultiplier);
                }
                
                // ÈÄ£Á∫åÁç≤ÂãùÁçéÂãµ
                if (gameState.streak >= 2) {
                    const bonus = Math.floor(winAmount * 0.15);
                    coinSystem.addCoins(bonus);
                } else if (gameState.streak >= 3) {
                    const bonus = Math.floor(winAmount * 0.25);
                    coinSystem.addCoins(bonus);
                } else if (gameState.streak >= 4) {
                    const bonus = Math.floor(winAmount * 0.35);
                    coinSystem.addCoins(bonus);
                } else if (gameState.streak >= 5) {
                    const bonus = Math.floor(winAmount * 0.50);
                    coinSystem.addCoins(bonus);
                } else if (gameState.streak >= 7) {
                    const bonus = Math.floor(winAmount * 0.75);
                    coinSystem.addCoins(bonus);
                } else if (gameState.streak >= 10) {
                    const bonus = Math.floor(winAmount * 1.0);
                    coinSystem.addCoins(bonus);
                }
                
            } else {
                gameState.autoSpin.losses++;
                gameState.streak = 0;
            }
            
            // ÈáçÁΩÆÈÅäÊà≤ÁãÄÊÖã
            gameState.isSpinning = false;
            
            // Êõ¥Êñ∞È°ØÁ§∫
            updateDisplay();
            saveGameData();
            
            // Ê™¢Êü•ÊòØÂê¶ÁπºÁ∫åËá™ÂãïËΩâÂãï
            if (gameState.autoSpin.isActive && gameState.autoSpin.count < gameState.autoSpin.totalCount) {
                // ÁπºÁ∫å‰∏ã‰∏ÄÊ¨°ËΩâÂãï
                setTimeout(() => {
                    performAutoSpin();
                }, 500); // Áü≠Êö´Âª∂ÈÅ≤
            } else if (gameState.autoSpin.count >= gameState.autoSpin.totalCount) {
                stopAutoSpin();
            }
        }

        // È†ÅÈù¢ËºâÂÖ•ÊôÇÂàùÂßãÂåñ
        window.addEventListener('load', initGame);
        
        // È†ÅÈù¢ÈóúÈñâÊôÇÂÅúÊ≠¢Ëá™ÂãïËΩâÂãï
        window.addEventListener('beforeunload', function() {
            if (gameState.autoSpin.isActive) {
                stopAutoSpin();
            }
        });
        
        // È†ÅÈù¢Â§±ÂéªÁÑ¶ÈªûÊôÇÊö´ÂÅúËá™ÂãïËΩâÂãïÔºàÂèØÈÅ∏Ôºâ
        window.addEventListener('blur', function() {
            if (gameState.autoSpin.isActive) {
                console.log('ü§ñ È†ÅÈù¢Â§±ÂéªÁÑ¶ÈªûÔºåËá™ÂãïËΩâÂãïÁπºÁ∫åÈÄ≤Ë°å‰∏≠...');
            }
        });
        
        // Ê∏¨Ë©¶ËΩâÂãïÂäüËÉΩ
        function testSpin() {
            console.log('üß™ Ê∏¨Ë©¶ËΩâÂãïÂäüËÉΩ...');
            console.log('üé∞ Áï∂ÂâçÈÅäÊà≤ÁãÄÊÖã:', gameState);
            console.log('ü™ô Áï∂ÂâçÈáëÂπ£:', coinSystem ? coinSystem.getCoins() : 'N/A');
            console.log('‚≠ê Áï∂ÂâçÊòüÊòü:', starSystem ? starSystem.getStars() : 'N/A');
            
            // Ê™¢Êü•ËΩâËº™ÂÖÉÁ¥†
            const strips = ['strip1', 'strip2', 'strip3'];
            strips.forEach((stripId, index) => {
                const strip = document.getElementById(stripId);
                if (strip) {
                    console.log(`‚úÖ ËΩâËº™ ${index + 1} (${stripId}) Â≠òÂú®ÔºåÈ†ÖÁõÆÊï∏Èáè: ${strip.children.length}`);
                    
                    // Ê™¢Êü•ËΩâËº™ÂÖßÂÆπ
                    const items = strip.querySelectorAll('.reel-item');
                    console.log(`üìä ËΩâËº™ ${index + 1} ÂÖßÂÆπ:`, Array.from(items).map(item => {
                        const img = item.querySelector('img');
                        return img ? `ÂúñÁâá(${img.src.substring(0, 50)}...)` : item.textContent;
                    }));
                } else {
                    console.error(`‚ùå ËΩâËº™ ${index + 1} (${stripId}) ‰∏çÂ≠òÂú®`);
                }
            });
            
            // ÂòóË©¶ËΩâÂãï
            if (!gameState.isSpinning) {
                console.log('üé∞ ÈñãÂßãÊ∏¨Ë©¶ËΩâÂãï...');
                spin();
            } else {
                console.log('‚ö†Ô∏è ÈÅäÊà≤Ê≠£Âú®ËΩâÂãï‰∏≠ÔºåÁÑ°Ê≥ïÊ∏¨Ë©¶');
            }
        }
        
        // Ê∏¨Ë©¶ËΩâËº™ÂãïÁï´
        function testReelAnimation() {
            console.log('üé¨ Ê∏¨Ë©¶ËΩâËº™ÂãïÁï´...');
            
            const strips = ['strip1', 'strip2', 'strip3'];
            strips.forEach((stripId, index) => {
                const strip = document.getElementById(stripId);
                if (strip) {
                    console.log(`üéØ Ê∏¨Ë©¶ËΩâËº™ ${index + 1} (${stripId})`);
                    
                    // Á∞°ÂñÆÁöÑ‰∏ä‰∏ãÁßªÂãïÊ∏¨Ë©¶
                    strip.style.transition = 'transform 1s ease-in-out';
                    strip.style.transform = 'translateY(-200px)';
                    
                    setTimeout(() => {
                        strip.style.transform = 'translateY(0)';
                        console.log(`‚úÖ ËΩâËº™ ${index + 1} ÂãïÁï´Ê∏¨Ë©¶ÂÆåÊàê`);
                    }, 1000);
                }
            });
        }
        
        // Âº∑Âà∂ËΩâÂãïÊ∏¨Ë©¶
        function forceSpin() {
            console.log('üé∞ Âº∑Âà∂ËΩâÂãïÊ∏¨Ë©¶...');
            
            const strips = ['strip1', 'strip2', 'strip3'];
            const spinDuration = 2000;
            
            strips.forEach((stripId, index) => {
                const strip = document.getElementById(stripId);
                if (strip) {
                    console.log(`üéØ Âº∑Âà∂ËΩâÂãïËΩâËº™ ${index + 1} (${stripId})`);
                    
                    // ÈáçÁΩÆ‰ΩçÁΩÆ
                    strip.style.transition = 'none';
                    strip.style.transform = 'translateY(0)';
                    strip.offsetHeight; // Âº∑Âà∂ÈáçÁπ™
                    
                    // ÈñãÂßãÂãïÁï´
                    setTimeout(() => {
                        strip.style.transition = `transform ${spinDuration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`;
                        strip.style.transform = `translateY(-${(index + 1) * 200}px)`;
                        console.log(`‚úÖ ËΩâËº™ ${index + 1} Âº∑Âà∂ËΩâÂãïÂ∑≤ÂïüÂãï`);
                    }, index * 200);
                } else {
                    console.error(`‚ùå Êâæ‰∏çÂà∞ËΩâËº™: ${stripId}`);
                }
            });
            
            // ÈáçÁΩÆÊåâÈàï
            setTimeout(() => {
                const spinButton = document.getElementById('spinButton');
                if (spinButton) {
                    spinButton.disabled = false;
                    spinButton.textContent = 'üé∞ SPIN! (100ü™ô)';
                }
                gameState.isSpinning = false;
                console.log('üé∞ Âº∑Âà∂ËΩâÂãïÊ∏¨Ë©¶ÂÆåÊàê');
            }, spinDuration + 1000);
        }
        
        // Â∞áÊ∏¨Ë©¶ÂáΩÊï∏Êö¥Èú≤Âà∞ÂÖ®Â±Ä
        window.testSpin = testSpin;
        window.testReelAnimation = testReelAnimation;
        window.forceSpin = forceSpin;
    </script>
</body>
</html> 
