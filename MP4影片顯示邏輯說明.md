# MP4 影片顯示邏輯說明

## 🎯 顯示邏輯總覽

根據您的需求，我們實現了以下顯示邏輯：

### 1. MP4 檔案作為主要媒體（推薦）
- **設定方式**：將 MP4 檔案路徑放在 `image` 屬性中
- **顯示效果**：卡片直接顯示 MP4 影片
- **播放方式**：已解鎖時自動播放並循環
- **控制方式**：無播放按鈕，影片自動播放

```javascript
{
  "word": "dancing_cat",
  "zh": "跳舞的貓",
  "image": "sound/dancing_cat.mp4",  // 直接使用 MP4 檔案
  "rarity": "稀有",
  "category": "可愛動物"
}
```

### 2. YouTube 影片（保持原設定）
- **設定方式**：將 YouTube 連結放在 `video` 屬性中
- **顯示效果**：顯示圖片 + 影片按鈕
- **播放方式**：點擊按鈕開啟 YouTube 播放器
- **控制方式**：點擊影片按鈕播放

```javascript
{
  "word": "pikachu",
  "zh": "皮卡丘",
  "image": "img/cards/pikachu.jpg",  // 縮圖
  "video": "https://youtu.be/FUNo4aB8xFE",  // YouTube 影片
  "rarity": "超稀有",
  "category": "寶可夢"
}
```

### 3. 本地 MP4 影片（video 屬性）
- **設定方式**：將本地 MP4 檔案路徑放在 `video` 屬性中
- **顯示效果**：直接顯示 MP4 影片
- **播放方式**：已解鎖時自動播放並循環
- **控制方式**：無播放按鈕，影片自動播放

```javascript
{
  "word": "magic_sparkle",
  "zh": "魔法閃爍",
  "image": "img/cards/sparkle_thumbnail.jpg",  // 縮圖
  "video": "sound/magic_sparkle.mp4",          // 本地 MP4 影片
  "rarity": "普通",
  "category": "魔法效果"
}
```

## 🔍 檢測邏輯

系統會根據以下規則自動判斷顯示方式：

1. **檢查 `image` 屬性**：
   - 如果以 `.mp4` 結尾 → 直接顯示影片
   - 否則 → 顯示圖片

2. **檢查 `video` 屬性**：
   - 如果包含 `youtube.com` 或 `youtu.be` → YouTube 影片（圖片 + 按鈕）
   - 如果以 `.mp4` 結尾 → 本地 MP4 影片（直接顯示）
   - 其他格式 → 一般影片（圖片 + 按鈕）

## 📋 使用建議

### 推薦使用方式：
1. **想要直接顯示影片**：使用 `image` 屬性放 MP4 檔案路徑
2. **想要保持 YouTube 體驗**：使用 `video` 屬性放 YouTube 連結
3. **想要本地影片但需要縮圖**：使用 `video` 屬性放本地 MP4 檔案

### 檔案要求：
- **MP4 格式**：建議使用 H.264 編碼
- **檔案大小**：建議不超過 10MB
- **解析度**：建議 480p 或更低
- **長度**：建議 5-15 秒的循環影片

## 🎮 功能特點

### 已解鎖卡片：
- ✅ 自動播放 MP4 影片
- ✅ 影片循環播放
- ✅ 靜音播放（避免干擾）
- ✅ 無播放按鈕（避免遮擋）
- ✅ 滑鼠懸停效果

### 未解鎖卡片：
- ✅ 顯示影片第一幀作為縮圖
- ✅ 套用灰階濾鏡效果
- ✅ 保持原有解鎖機制

### Modal 檢視：
- ✅ 點擊卡片開啟詳細檢視
- ✅ 影片自動播放
- ✅ 支援全螢幕播放

## 🧪 測試頁面

您可以訪問以下頁面來測試不同類型的卡片：
- `test_mp4_image_cards.html` - 測試 MP4 作為 image 屬性
- `cards.html` - 查看所有卡片效果 