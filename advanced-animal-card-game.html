<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€²éšå‹•ç‰©å¡ç‰Œç›¸å…‹éŠæˆ²</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(2px 2px at 20px 30px, #ffffff, transparent),
                radial-gradient(2px 2px at 40px 70px, #ffffff, transparent),
                radial-gradient(1px 1px at 90px 40px, #ffffff, transparent),
                radial-gradient(1px 1px at 130px 80px, #ffffff, transparent),
                radial-gradient(2px 2px at 160px 30px, #ffffff, transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: stars 20s linear infinite;
            opacity: 0.3;
            z-index: -1;
        }

        .stars-interactive {
            animation: stars-fast 5s linear infinite !important;
            opacity: 0.6 !important;
        }

        .stars-victory {
            animation: stars-victory 2s ease-in-out !important;
            opacity: 0.8 !important;
        }

        .stars-damage {
            animation: stars-damage 0.5s ease-in-out !important;
            opacity: 0.7 !important;
        }

        @keyframes stars-fast {
            from { opacity: 0.3; }
            to { opacity: 0.6; }
        }

        @keyframes stars-victory {
            0% { opacity: 0.3; }
            50% { opacity: 0.8; }
            100% { opacity: 0.3; }
        }

        @keyframes stars-damage {
            0% { opacity: 0.3; }
            50% { opacity: 0.7; }
            100% { opacity: 0.3; }
        }

        @keyframes stars {
            from { opacity: 0.3; }
            to { opacity: 0.5; }
        }

        .game-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .game-header h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255,255,255,0.5);
            background: linear-gradient(45deg, #00ffff, #0080ff, #8000ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: cosmic-glow 3s ease-in-out infinite alternate;
        }

        @keyframes cosmic-glow {
            from { filter: drop-shadow(0 0 10px rgba(0,255,255,0.5)); }
            to { filter: drop-shadow(0 0 20px rgba(128,0,255,0.8)); }
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(0,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(15px);
            text-align: center;
            color: white;
            border: 1px solid rgba(0,255,255,0.3);
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0,255,255,0.1);
        }

        .stat-card:hover {
            box-shadow: 0 15px 40px rgba(0,255,255,0.3);
            border-color: rgba(0,255,255,0.6);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .health-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .health-fill {
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .player-health { background: linear-gradient(90deg, #00b894, #00cec9); }
        .opponent-health { background: linear-gradient(90deg, #e17055, #d63031); }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 2.5fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .player-area, .opponent-area {
            background: rgba(0,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            min-height: 320px;
            border: 1px solid rgba(0,255,255,0.3);
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 32px rgba(0,255,255,0.1);
        }

        .player-title {
            text-align: center;
            color: white;
            margin-bottom: 25px;
            font-size: 1.4rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            justify-items: center;
            min-height: 200px;
            padding: 10px;
        }

        .player-area .cards-container {
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            max-width: 100%;
        }

        .opponent-area .cards-container {
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            max-width: 100%;
        }

        .card {
            width: 140px;
            height: 190px;
            background: linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.8));
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2), 0 0 20px rgba(0,255,255,0.1);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: #333;
            border: 2px solid rgba(0,255,255,0.3);
            overflow: hidden;
            padding: 15px 10px;
            backdrop-filter: blur(5px);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .card:hover::before {
            transform: translateX(100%);
        }

        .card:hover {
            box-shadow: 0 15px 30px rgba(0,0,0,0.4), 0 0 30px rgba(0,255,255,0.4);
            border: 3px solid rgba(0,255,255,0.6);
        }

        .player-area .card:hover {
            border-color: #00ffff;
            box-shadow: 0 15px 30px rgba(0,255,255,0.4);
        }

        .opponent-area .card:hover {
            border-color: #ff0080;
            box-shadow: 0 15px 30px rgba(255,0,128,0.4);
        }

        .card.selected {
            box-shadow: 0 0 30px rgba(0,255,255,0.8);
            border: 4px solid #00ffff;
            animation: selected-pulse 1s ease-in-out infinite alternate;
            z-index: 10;
        }

        .player-area .card.selected {
            border-color: #00ffff;
            box-shadow: 0 0 30px rgba(0,255,255,0.8);
        }

        @keyframes selected-pulse {
            from { box-shadow: 0 0 25px rgba(0,255,255,0.6); }
            to { box-shadow: 0 0 35px rgba(0,255,255,0.8); }
        }

        .card.played {
            opacity: 0.7;
        }

        .card-image {
            width: 80px;
            height: 80px;
            font-size: 3.5rem;
            margin-bottom: 8px;
            margin-top: 15px;
        }

        .card-name {
            font-size: 1rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 8px;
            margin-top: 5px;
            padding: 0 5px;
            line-height: 1.2;
            max-width: 100%;
        }

        .card-power {
            font-size: 1.5rem;
            font-weight: bold;
            color: #e17055;
            padding: 6px 10px;
            border-radius: 10px;
            background: rgba(255,255,255,0.95);
            border: 2px solid #e17055;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            position: absolute;
            top: 8px;
            left: 8px;
            z-index: 3;
        }

        .card-power::before {
            content: 'ATK';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            background: #e17055;
            color: white;
            font-size: 0.5rem;
            padding: 1px 4px;
            border-radius: 6px;
            font-weight: bold;
        }

        .card-type {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            z-index: 2;
        }

        .card-weakness {
            position: absolute;
            bottom: 8px;
            left: 8px;
            background: linear-gradient(45deg, #e17055, #d63031);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            z-index: 3;
        }

        .card-special {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background: linear-gradient(45deg, #9c27b0, #7b1fa2);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            z-index: 3;
        }

        .battlefield {
            background: rgba(0,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            min-height: 450px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            border: 1px solid rgba(0,255,255,0.3);
            box-shadow: 0 8px 32px rgba(0,255,255,0.1);
        }

        .battlefield-title {
            text-align: center;
            color: white;
            margin-bottom: 25px;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .battlefield-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 25px;
            justify-items: center;
            min-height: 300px;
            align-items: center;
            padding: 20px;
        }

        .battlefield-cards .card {
            margin: 10px;
        }

        .battlefield-card {
            position: relative;
            animation: card-fade 0.6s ease-out;
        }

        .battlefield-card .card-power {
            animation: power-glow 2s ease-in-out infinite;
        }

        @keyframes power-glow {
            0%, 100% { box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
            50% { box-shadow: 0 4px 12px rgba(0,0,0,0.4); }
        }

        @keyframes card-fade {
            0% { opacity: 0; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(145deg, #00ffff, #0080ff);
            color: white;
        }

        .btn-primary:hover {
            box-shadow: 0 8px 16px rgba(0,255,255,0.4);
        }

        .btn-secondary {
            background: linear-gradient(145deg, #8000ff, #4000ff);
            color: white;
        }

        .btn-secondary:hover {
            box-shadow: 0 8px 16px rgba(128,0,255,0.4);
        }

        .btn-danger {
            background: linear-gradient(145deg, #ff0080, #ff0040);
            color: white;
        }

        .btn-danger:hover {
            box-shadow: 0 8px 16px rgba(255,0,128,0.4);
        }

        .btn-warning {
            background: linear-gradient(145deg, #ff8000, #ff4000);
            color: white;
        }

        .btn-warning:hover {
            box-shadow: 0 8px 16px rgba(255,128,0,0.4);
        }

        .game-message {
            text-align: center;
            color: white;
            font-size: 1.3rem;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            animation: message-fade 0.5s ease-in;
        }

        @keyframes message-fade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .card-back {
            background: linear-gradient(145deg, #2d3436, #636e72);
            color: white;
            font-size: 0.9rem;
            text-align: center;
        }

        .winner {
            animation: winner-glow 2s ease-in-out infinite alternate;
        }

        .winner .card-power {
            background: rgba(255,255,255,0.98);
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(255,215,0,0.6);
        }

        @keyframes winner-glow {
            from { 
                box-shadow: 0 0 25px rgba(255,215,0,0.6);
            }
            to { 
                box-shadow: 0 0 35px rgba(255,215,0,0.8);
            }
        }



        .damage-animation {
            animation: damage-shake 0.5s ease-in-out;
        }

        @keyframes damage-shake {
            0%, 100% { opacity: 1; }
            25% { opacity: 0.7; }
            75% { opacity: 0.7; }
        }

        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fade-in 0.5s ease-in;
        }

        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .game-over-content {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: fade-in 0.5s ease-out;
            position: relative; /* ç‚ºé—œé–‰æŒ‰éˆ•å®šä½ */
        }

        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .game-over h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .game-over p {
            margin-bottom: 30px;
            color: #666;
            font-size: 1.1rem;
        }

        .food-chain-info {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            color: white;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
        }

        .food-chain-info h3 {
            margin-bottom: 15px;
            color: #ffd700;
            font-size: 1.2rem;
        }

        .food-chain-rule {
            margin: 8px 0;
            padding: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            border-left: 3px solid #ffd700;
        }

        .special-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        .effect-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ffd700;
            border-radius: 50%;
            animation: particle-fall 2s linear infinite;
        }

        @keyframes particle-fall {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        .skill-button {
            background: linear-gradient(145deg, #9c27b0, #7b1fa2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .skill-button:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .skill-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .sound-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            display: flex;
            gap: 10px;
        }

        .sound-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .sound-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .sound-btn.active {
            background: rgba(255,215,0,0.3);
            color: #ffd700;
        }

        .sound-btn[title="èƒŒæ™¯éŸ³æ¨‚"] {
            background: rgba(255,107,107,0.2);
        }

        .sound-btn[title="èƒŒæ™¯éŸ³æ¨‚"]:hover {
            background: rgba(255,107,107,0.3);
        }

        .sound-btn[title="èƒŒæ™¯éŸ³æ¨‚"].active {
            background: rgba(255,215,0,0.3);
            color: #ffd700;
        }

        /* æ˜Ÿæ˜Ÿé¡¯ç¤º */
        #starsDisplay {
            position: fixed;
            top: 15px;
            left: 15px;
            background: rgba(10, 20, 40, 0.6);
            padding: 4px 8px;
            border-radius: 10px;
            color: #ffd700;
            font-weight: bold;
            box-shadow: 0 0 12px #ffd700, 0 0 32px #00ffff;
            border: 2px solid #00ffff;
            font-size: 1.1rem;
            backdrop-filter: blur(1px);
            z-index: 1000;
        }

        @media (max-width: 768px) {
            .game-area {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .cards-container {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 12px;
            }
            
            .battlefield-cards {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 15px;
            }
            
            .card {
                width: 120px;
                height: 170px;
                padding: 10px 8px;
            }
            
            .battlefield-cards .card {
                /* ç§»é™¤ç¸®æ”¾æ•ˆæœï¼Œä¿æŒåŸæœ‰æ¨£å¼ */
                transform: none;
            }
            
            .card-image {
                width: 60px;
                height: 60px;
                font-size: 2.8rem;
            }
            
            .card-name {
                font-size: 0.9rem;
            }
            
            .card-power {
                font-size: 1.3rem;
                padding: 4px 8px;
            }
            
            .card-power::before {
                font-size: 0.4rem;
                padding: 1px 3px;
            }
            
            .game-header h1 {
                font-size: 2.5rem;
            }

            .game-controls {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 200px;
            }
        }
    </style>
</head>
<body>
            <div id="app">
            <!-- æ˜Ÿæ˜Ÿé¡¯ç¤º -->
            <div id="starsDisplay">
                â­<span id="totalStarsCount">0</span>
            </div>

            <!-- éŸ³æ•ˆæ§åˆ¶ -->
            <div class="sound-controls">
                <button class="sound-btn" :class="{ active: soundEnabled }" @click="toggleSound">
                    ğŸ”Š
                </button>
                <button class="sound-btn" :class="{ active: musicEnabled }" @click="toggleMusic">
                    ğŸµ
                </button>
                <button class="sound-btn" :class="{ active: isMusicPlaying }" @click="toggleBackgroundMusic" title="èƒŒæ™¯éŸ³æ¨‚">
                    ğŸ¼
                </button>
            </div>

            <div class="game-container">
            <div class="game-header">
                <h1>ğŸ¦ é€²éšå‹•ç‰©å¡ç‰Œç›¸å…‹éŠæˆ²</h1>
                <p>è¤‡é›œé£Ÿç‰©éˆç³»çµ±èˆ‡ç‰¹æ®ŠæŠ€èƒ½</p>
                <p style="color: #ffd700; font-size: 1rem; margin-top: 10px;">ğŸ® æ¯æ¬¡éŠæˆ²éœ€è¦10é¡†æ˜Ÿæ˜Ÿï¼Œå‹åˆ©å¯ç²å¾—20é¡†æ˜Ÿæ˜Ÿï¼Œå¤±æ•—æ‰£é™¤2é¡†æ˜Ÿæ˜Ÿï¼</p>
                <p style="color: #00ff00; font-size: 0.9rem; margin-top: 5px;">ğŸŒŸ éŠæˆ²å·²å„ªåŒ–ï¼šAIæ›´å‹å–„ï¼Œæ›´å®¹æ˜“ç²å‹ï¼</p>
                <button class="btn btn-secondary" onclick="location.href='index.html'" style="margin-top: 15px;">
                    ğŸ  è¿”å›é¦–é 
                </button>
            </div>

            <div class="game-stats">
                <div class="stat-card">
                    <span class="stat-value">{{ playerHealth }}</span>
                    <span class="stat-label">ç©å®¶ç”Ÿå‘½</span>
                    <div class="health-bar">
                        <div class="health-fill player-health" :style="{ width: (playerHealth / 25 * 100) + '%' }"></div>
                    </div>
                </div>
                <div class="stat-card">
                    <span class="stat-value">{{ turn }}</span>
                    <span class="stat-label">å›åˆæ•¸</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">{{ playerEnergy }}</span>
                    <span class="stat-label">ç©å®¶èƒ½é‡</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value">{{ opponentHealth }}</span>
                    <span class="stat-label">å°æ‰‹ç”Ÿå‘½</span>
                    <div class="health-bar">
                        <div class="health-fill opponent-health" :style="{ width: (opponentHealth / 25 * 100) + '%' }"></div>
                    </div>
                </div>
            </div>

            <div class="food-chain-info">
                <h3>ğŸŒ¿ è¤‡é›œé£Ÿç‰©éˆç›¸å…‹ç³»çµ±ï¼š</h3>
                <div class="food-chain-rule">ğŸ¦ ç…å­ > ğŸ¦’ é•·é ¸é¹¿ > ğŸŒ¿ è‰</div>
                <div class="food-chain-rule">ğŸ è›‡ > ğŸ­ è€é¼  > ğŸŒ¿ è‰</div>
                <div class="food-chain-rule">ğŸ¦… è€é·¹ > ğŸ è›‡ > ğŸ­ è€é¼ </div>
                <div class="food-chain-rule">ğŸº ç‹¼ > ğŸ¦Œ é¹¿ > ğŸŒ¿ è‰</div>
                <div class="food-chain-rule">ğŸ¦Š ç‹ç‹¸ > ğŸ° å…”å­ > ğŸŒ¿ è‰</div>
                <div class="food-chain-rule">ğŸ¯ è€è™ > ğŸº ç‹¼ > ğŸ¦Œ é¹¿</div>
                <div class="food-chain-rule">ğŸ» ç†Š > ğŸŸ é­š > ğŸ¦ è¦</div>
                <div class="food-chain-rule">ğŸ¦ˆ é¯Šé­š > ğŸŸ é­š > ğŸ¦ è¦</div>
                <div class="food-chain-rule">ğŸ¦‰ è²“é ­é·¹ > ğŸ­ è€é¼  > ğŸŒ¿ è‰</div>
                <div class="food-chain-rule">ç›¸å…‹æ™‚æ”»æ“ŠåŠ›ç¿»å€ï¼Œè¢«å…‹æ™‚æ”»æ“ŠåŠ›æ¸›åŠ</div>
            </div>

            <div class="game-area">
                <!-- å°æ‰‹å€åŸŸ -->
                <div class="opponent-area">
                    <div class="player-title">ğŸ¤– å°æ‰‹</div>
                    <div class="cards-container">
                        <div v-for="(card, index) in opponentHand" 
                             :key="'opponent-' + index"
                             class="card card-back">
                            <div>?</div>
                        </div>
                    </div>
                </div>

                <!-- æˆ°å ´å€åŸŸ -->
                <div class="battlefield">
                    <div class="battlefield-title">âš”ï¸ æˆ°å ´</div>
                    <div class="battlefield-cards">
                        <div v-for="(card, index) in battlefield" 
                             :key="'battlefield-' + index"
                             class="card battlefield-card"
                             :class="{ 'winner': card.winner, 'damage-animation': card.damage }">
                            <div class="card-type">{{ card.type }}</div>
                            <div class="card-image">{{ card.emoji }}</div>
                            <div class="card-name">{{ card.name }}</div>
                            <div class="card-power">{{ card.power }}</div>
                            <div v-if="card.weakness" class="card-weakness">å¼±é»: {{ card.weakness }}</div>
                            <div v-if="card.special" class="card-special">{{ card.special }}</div>
                        </div>
                    </div>
                    
                    <div class="game-message" v-if="gameMessage">
                        <div v-if="!gameStarted && !gameOver" style="color: #ffd700; font-weight: bold;">
                            {{ gameMessage }}
                        </div>
                        <div v-else-if="gameOver" style="color: #ff6b6b; font-weight: bold;">
                            {{ gameMessage }}
                        </div>
                        <div v-else style="color: #4ecdc4; font-weight: bold;">
                            {{ gameMessage }}
                        </div>
                    </div>
                </div>

                <!-- ç©å®¶å€åŸŸ -->
                <div class="player-area">
                    <div class="player-title">ğŸ‘¤ ç©å®¶</div>
                    <div class="cards-container">
                        <div v-for="(card, index) in playerHand" 
                             :key="'player-' + index"
                             class="card"
                             :class="{ 'selected': selectedCard === index }"
                             @click="gameOver ? null : selectCard(index)"
                             :style="{ cursor: gameOver ? 'not-allowed' : 'pointer' }">
                            <div class="card-type">{{ card.type }}</div>
                            <div class="card-image">{{ card.emoji }}</div>
                            <div class="card-name">{{ card.name }}</div>
                            <div class="card-power">{{ card.power }}</div>
                            <div v-if="card.weakness" class="card-weakness">å¼±é»: {{ card.weakness }}</div>
                            <div v-if="card.special" class="card-special">{{ card.special }}</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="game-controls">
                <button class="btn btn-primary" 
                        @click="startGame" 
                        :disabled="gameStarted || totalStars < 10">
                    é–‹å§‹éŠæˆ²
                </button>
                <button class="btn btn-primary" 
                        @click="playCard" 
                        :disabled="selectedCard === null || gameOver || !gameStarted">
                    å‡ºç‰Œ
                </button>
                <button class="btn btn-secondary" 
                        @click="endTurn" 
                        :disabled="gameOver || !gameStarted || playerHand.length > 0">
                    çµæŸå›åˆ
                </button>
                <button class="btn btn-warning" 
                        @click="useSpecialSkill" 
                        :disabled="playerEnergy < 3 || gameOver || !gameStarted">
                    ç‰¹æ®ŠæŠ€èƒ½ (3èƒ½é‡)
                </button>
                <button class="btn btn-danger" 
                        @click="newGame"
                        :disabled="gameOver">
                    æ–°éŠæˆ²
                </button>
            </div>
        </div>

        <!-- éŠæˆ²çµæŸå½ˆçª— -->
        <div class="game-over" v-if="gameOver">
            <div class="game-over-content">
                <button @click="gameOver = false" 
                        style="
                            position: absolute;
                            top: 10px;
                            right: 15px;
                            background: #ff4444;
                            color: white;
                            border: none;
                            border-radius: 50%;
                            width: 30px;
                            height: 30px;
                            font-size: 18px;
                            cursor: pointer;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                            transition: all 0.3s ease;
                        "
                        onmouseover="this.style.background='#ff6666'"
                        onmouseout="this.style.background='#ff4444'">
                    Ã—
                </button>
                <h2>{{ gameOverMessage }}</h2>
                <p>æœ€çµ‚åˆ†æ•¸: {{ playerHealth }} vs {{ opponentHealth }}</p>
                <p>ç¸½å›åˆæ•¸: {{ turn }}</p>
                <button class="btn btn-primary" @click="newGame">å†ç©ä¸€æ¬¡</button>
            </div>
        </div>

        <!-- ç‰¹æ•ˆå€åŸŸ -->
        <div class="special-effects" v-if="showEffects">
            <div v-for="i in 25" :key="i" 
                 class="effect-particle"
                 :style="{ 
                     left: Math.random() * 100 + '%',
                     animationDelay: Math.random() * 2 + 's',
                     animationDuration: (Math.random() * 2 + 1) + 's'
                 }">
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    playerHealth: 25,
                    opponentHealth: 20, // é™ä½å°æ‰‹åˆå§‹è¡€é‡
                    playerEnergy: 5,
                    turn: 1,
                    playerHand: [],
                    opponentHand: [],
                    battlefield: [],
                    selectedCard: null,
                    gameMessage: '',
                    gameOver: false,
                    gameOverMessage: '',
                    currentPlayer: 'player',
                    deck: [],
                    showEffects: false,
                    soundEnabled: true,
                    musicEnabled: true,
                    audioContext: null,
                    sounds: {},
                    totalStars: 0,
                    gameStarted: false, // æ–°å¢ï¼šéŠæˆ²æ˜¯å¦å·²é–‹å§‹
                    gameRewarded: false, // æ–°å¢ï¼šé˜²æ­¢é‡è¤‡çå‹µçš„æ¨™è¨˜
                    foodChain: {
                        'ç…å­': ['é•·é ¸é¹¿', 'é¹¿', 'æ–‘é¦¬'],
                        'é•·é ¸é¹¿': ['è‰'],
                        'è›‡': ['è€é¼ ', 'é’è›™'],
                        'è€é¼ ': ['è‰', 'ç¨®å­'],
                        'è€é·¹': ['è›‡', 'å…”å­'],
                        'ç‹¼': ['é¹¿', 'å…”å­'],
                        'é¹¿': ['è‰'],
                        'ç‹ç‹¸': ['å…”å­', 'é›'],
                        'å…”å­': ['è‰'],
                        'è€è™': ['ç‹¼', 'é¹¿'],
                        'ç†Š': ['é­š', 'èœ‚èœœ'],
                        'é­š': ['è¦', 'èŸ²'],
                        'é¯Šé­š': ['é­š'],
                        'è²“é ­é·¹': ['è€é¼ ', 'é’è›™'],
                        'è‰': []
                    }
                }
            },
            mounted() {
                this.initializeAudio();
                this.loadTotalStars();
                this.initBackgroundMusic();
                // ä¸è‡ªå‹•åˆå§‹åŒ–éŠæˆ²ï¼Œç­‰å¾…ç©å®¶é»æ“Šé–‹å§‹
                this.gameMessage = 'è«‹é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•é–‹å§‹éŠæˆ²ï¼';
            },
            methods: {
                initializeAudio() {
                    // åˆå§‹åŒ–éŸ³æ•ˆç³»çµ±
                    try {
                        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                        this.createSounds();
                    } catch (error) {
                        console.log('éŸ³æ•ˆç³»çµ±åˆå§‹åŒ–å¤±æ•—:', error);
                    }
                },

                createSounds() {
                    // å‰µå»ºå„ç¨®éŸ³æ•ˆ
                    this.sounds = {
                        cardPlay: this.createTone(440, 0.1, 'sine'), // å‡ºç‰ŒéŸ³æ•ˆ
                        victory: this.createTone(523, 0.3, 'square'), // å‹åˆ©éŸ³æ•ˆ
                        damage: this.createTone(220, 0.2, 'sawtooth'), // å‚·å®³éŸ³æ•ˆ
                        special: this.createTone(659, 0.4, 'triangle'), // ç‰¹æ®ŠæŠ€èƒ½éŸ³æ•ˆ
                        button: this.createTone(330, 0.1, 'sine'), // æŒ‰éˆ•éŸ³æ•ˆ
                        heal: this.createTone(784, 0.3, 'sine'), // æ²»ç™’éŸ³æ•ˆ
                        shuffle: this.createTone(196, 0.5, 'sawtooth'), // æ´—ç‰ŒéŸ³æ•ˆ
                        gameOver: this.createTone(110, 0.8, 'square'), // éŠæˆ²çµæŸéŸ³æ•ˆ
                        background: this.createBackgroundMusic() // èƒŒæ™¯éŸ³æ¨‚
                    };
                },

                createTone(frequency, duration, type) {
                    return () => {
                        if (!this.soundEnabled || !this.audioContext) return;
                        
                        const oscillator = this.audioContext.createOscillator();
                        const gainNode = this.audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(this.audioContext.destination);
                        
                        oscillator.frequency.setValueAtTime(frequency, this.audioContext.currentTime);
                        oscillator.type = type;
                        
                        gainNode.gain.setValueAtTime(0.3, this.audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + duration);
                        
                        oscillator.start(this.audioContext.currentTime);
                        oscillator.stop(this.audioContext.currentTime + duration);
                    };
                },

                createBackgroundMusic() {
                    return () => {
                        if (!this.musicEnabled || !this.audioContext) return;
                        
                        // å‰µå»ºç°¡å–®çš„èƒŒæ™¯éŸ³æ¨‚å¾ªç’°
                        const notes = [261, 293, 329, 349, 392, 440, 493, 523]; // Cå¤§èª¿éŸ³éš
                        let currentNote = 0;
                        
                        const playNote = () => {
                            if (!this.musicEnabled) return;
                            
                            const oscillator = this.audioContext.createOscillator();
                            const gainNode = this.audioContext.createGain();
                            
                            oscillator.connect(gainNode);
                            gainNode.connect(this.audioContext.destination);
                            
                            oscillator.frequency.setValueAtTime(notes[currentNote], this.audioContext.currentTime);
                            oscillator.type = 'sine';
                            
                            gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.5);
                            
                            oscillator.start(this.audioContext.currentTime);
                            oscillator.stop(this.audioContext.currentTime + 0.5);
                            
                            currentNote = (currentNote + 1) % notes.length;
                            
                            setTimeout(playNote, 2000); // æ¯2ç§’æ’­æ”¾ä¸€å€‹éŸ³ç¬¦
                        };
                        
                        playNote();
                    };
                },

                toggleSound() {
                    this.soundEnabled = !this.soundEnabled;
                    if (this.soundEnabled) {
                        this.sounds.button();
                    }
                },

                toggleMusic() {
                    this.musicEnabled = !this.musicEnabled;
                    if (this.musicEnabled) {
                        this.sounds.background();
                        this.playBackgroundMusic();
                    } else {
                        this.pauseBackgroundMusic();
                    }
                },

                playSound(soundName) {
                    if (this.sounds[soundName]) {
                        this.sounds[soundName]();
                    }
                },

                // èƒŒæ™¯éŸ³æ¨‚ç³»çµ±
                bgMusic: null,
                isMusicPlaying: false,

                initBackgroundMusic() {
                    try {
                        this.bgMusic = new Audio('sound/adventures-loop-music-226836.mp3');
                        this.bgMusic.loop = true;
                        this.bgMusic.volume = 0.3;
                        this.bgMusic.preload = 'auto';
                        
                        // ç›£è½éŸ³æ¨‚è¼‰å…¥å®Œæˆ
                        this.bgMusic.addEventListener('canplaythrough', () => {
                            console.log('èƒŒæ™¯éŸ³æ¨‚è¼‰å…¥å®Œæˆ');
                        });
                        
                        // ç›£è½éŸ³æ¨‚éŒ¯èª¤
                        this.bgMusic.addEventListener('error', (e) => {
                            console.error('èƒŒæ™¯éŸ³æ¨‚è¼‰å…¥å¤±æ•—:', e);
                        });
                    } catch (error) {
                        console.error('åˆå§‹åŒ–èƒŒæ™¯éŸ³æ¨‚å¤±æ•—:', error);
                    }
                },

                playBackgroundMusic() {
                    if (this.bgMusic && !this.isMusicPlaying) {
                        this.bgMusic.play().then(() => {
                            this.isMusicPlaying = true;
                            console.log('èƒŒæ™¯éŸ³æ¨‚é–‹å§‹æ’­æ”¾');
                        }).catch(error => {
                            console.error('æ’­æ”¾èƒŒæ™¯éŸ³æ¨‚å¤±æ•—:', error);
                        });
                    }
                },

                pauseBackgroundMusic() {
                    if (this.bgMusic && this.isMusicPlaying) {
                        this.bgMusic.pause();
                        this.isMusicPlaying = false;
                        console.log('èƒŒæ™¯éŸ³æ¨‚æš«åœ');
                    }
                },

                toggleBackgroundMusic() {
                    if (this.isMusicPlaying) {
                        this.pauseBackgroundMusic();
                    } else {
                        this.playBackgroundMusic();
                    }
                },

                triggerStarsEffect(effectType) {
                    const starsElement = document.querySelector('body::before');
                    const body = document.querySelector('body');
                    
                    // ç§»é™¤ä¹‹å‰çš„æ˜Ÿæ˜Ÿæ•ˆæœé¡åˆ¥
                    body.classList.remove('stars-interactive', 'stars-victory', 'stars-damage');
                    
                    // æ·»åŠ æ–°çš„æ˜Ÿæ˜Ÿæ•ˆæœé¡åˆ¥
                    body.classList.add(`stars-${effectType}`);
                    
                    // æ ¹æ“šæ•ˆæœé¡å‹è¨­ç½®ä¸åŒçš„æŒçºŒæ™‚é–“
                    let duration = 2000;
                    if (effectType === 'damage') duration = 500;
                    if (effectType === 'victory') duration = 2000;
                    if (effectType === 'interactive') duration = 5000;
                    
                    // å»¶é²ç§»é™¤æ•ˆæœé¡åˆ¥
                    setTimeout(() => {
                        body.classList.remove(`stars-${effectType}`);
                    }, duration);
                },

                loadTotalStars() {
                    // å¾ localStorage è¼‰å…¥ç¸½æ˜Ÿæ˜Ÿæ•¸
                    const savedStars = localStorage.getItem('totalStars');
                    this.totalStars = savedStars ? parseInt(savedStars) : 0;
                    this.updateStarsDisplay();
                },

                updateStarsDisplay() {
                    // æ›´æ–°æ˜Ÿæ˜Ÿé¡¯ç¤º
                    const starsElement = document.getElementById('totalStarsCount');
                    if (starsElement) {
                        starsElement.textContent = this.totalStars;
                    }
                },

                addStars(amount) {
                    this.totalStars += amount;
                    localStorage.setItem('totalStars', this.totalStars.toString());
                    this.updateStarsDisplay();
                    
                    // å¦‚æœæ˜¯ç²å¾—æ˜Ÿæ˜Ÿï¼ˆæ­£æ•¸ï¼‰ï¼Œé¡¯ç¤ºå½ˆçª—å’ŒéŸ³æ•ˆ
                    if (amount > 0) {
                        this.showStarRewardPopup(amount);
                        this.playSound('victory');
                    } else if (amount < 0) {
                        // å¦‚æœæ˜¯æ‰£é™¤æ˜Ÿæ˜Ÿï¼ˆè² æ•¸ï¼‰ï¼Œæ’­æ”¾æ‰£é™¤éŸ³æ•ˆ
                        this.playSound('damage');
                    }
                },

                showStarRewardPopup(amount) {
                    // å‰µå»ºæ˜Ÿæ˜Ÿçå‹µå½ˆçª—
                    const popup = document.createElement('div');
                    popup.style.cssText = `
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: linear-gradient(135deg, rgba(255, 215, 0, 0.95), rgba(255, 170, 0, 0.95));
                        color: #000;
                        padding: 30px 40px;
                        border-radius: 20px;
                        font-size: 1.8rem;
                        font-weight: bold;
                        z-index: 10000;
                        box-shadow: 0 0 40px #ffd700, 0 0 80px rgba(255, 215, 0, 0.5);
                        animation: starPopup 1.5s ease-out forwards;
                        text-align: center;
                        min-width: 300px;
                        font-family: 'Arial', sans-serif;
                    `;
                    
                    popup.innerHTML = `
                        <div style="position: relative;">
                            <button onclick="this.parentElement.parentElement.remove()" 
                                    style="
                                        position: absolute;
                                        top: -15px;
                                        right: -15px;
                                        background: #ff4444;
                                        color: white;
                                        border: none;
                                        border-radius: 50%;
                                        width: 30px;
                                        height: 30px;
                                        font-size: 18px;
                                        cursor: pointer;
                                        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                                        transition: all 0.3s ease;
                                    "
                                    onmouseover="this.style.background='#ff6666'"
                                    onmouseout="this.style.background='#ff4444'">
                                Ã—
                            </button>
                            <div style="font-size: 4rem; margin-bottom: 15px; animation: starBounce 0.6s ease-in-out;">â­</div>
                            <div style="font-size: 2.2rem; margin-bottom: 10px; color: #000;">+${amount} æ˜Ÿæ˜Ÿ</div>
                            <div style="font-size: 1.2rem; color: #666;">ç²å¾—æ˜Ÿæ˜Ÿçå‹µï¼</div>
                        </div>
                    `;
                    
                    // æ·»åŠ å‹•ç•«æ¨£å¼
                    const style = document.createElement('style');
                    style.textContent = `
                        @keyframes starPopup {
                            0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
                            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
                            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                        }
                        @keyframes starBounce {
                            0%, 100% { transform: scale(1); }
                            50% { transform: scale(1.3); }
                        }
                    `;
                    document.head.appendChild(style);
                    
                    document.body.appendChild(popup);
                    
                    // 5ç§’å¾Œè‡ªå‹•ç§»é™¤ï¼ˆå¢åŠ æ™‚é–“ï¼‰
                    setTimeout(() => {
                        if (document.body.contains(popup)) {
                            popup.style.animation = 'starPopupOut 0.5s ease-in forwards';
                            popup.style.setProperty('--animation', 'starPopupOut 0.5s ease-in forwards');
                        }
                        setTimeout(() => {
                            if (document.body.contains(popup)) {
                                document.body.removeChild(popup);
                            }
                            if (document.head.contains(style)) {
                                document.head.removeChild(style);
                            }
                        }, 500);
                    }, 5000);
                    
                    // æ·»åŠ ç§»é™¤å‹•ç•«
                    const removeStyle = document.createElement('style');
                    removeStyle.textContent = `
                        @keyframes starPopupOut {
                            0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                            100% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
                        }
                    `;
                    document.head.appendChild(removeStyle);
                },

                initializeGame() {
                    // æª¢æŸ¥æ˜Ÿæ˜Ÿæ˜¯å¦è¶³å¤ 
                    if (this.totalStars < 10) {
                        this.gameMessage = 'æ˜Ÿæ˜Ÿä¸è¶³ï¼éœ€è¦10é¡†æ˜Ÿæ˜Ÿæ‰èƒ½é–‹å§‹éŠæˆ²ï¼';
                        return;
                    }
                    
                    // æ‰£é™¤10é¡†æ˜Ÿæ˜Ÿ
                    this.addStars(-10);
                    this.gameMessage = 'éŠæˆ²é–‹å§‹ï¼å·²æ‰£é™¤10é¡†æ˜Ÿæ˜Ÿ';
                    
                    this.createDeck();
                    this.shuffleDeck();
                    this.dealCards();
                    this.gameOver = false;
                    this.gameStarted = true; // æ¨™è¨˜éŠæˆ²å·²é–‹å§‹
                    this.gameRewarded = false; // é‡ç½®çå‹µæ¨™è¨˜
                    this.playerEnergy = 5;
                    this.playSound('shuffle');
                    // é–‹å§‹èƒŒæ™¯éŸ³æ¨‚
                    if (this.musicEnabled) {
                        setTimeout(() => this.sounds.background(), 1000);
                        this.playBackgroundMusic();
                    }
                },

                startGame() {
                    // æª¢æŸ¥æ˜Ÿæ˜Ÿæ˜¯å¦è¶³å¤ 
                    if (this.totalStars < 10) {
                        this.gameMessage = 'æ˜Ÿæ˜Ÿä¸è¶³ï¼éœ€è¦10é¡†æ˜Ÿæ˜Ÿæ‰èƒ½é–‹å§‹éŠæˆ²ï¼';
                        return;
                    }
                    
                    this.initializeGame();
                },

                createDeck() {
                    const animals = [
                        { name: 'ç…å­', emoji: 'ğŸ¦', power: 8, type: 'è‚‰é£Ÿ', weakness: 'è€é·¹', special: 'ç‹è€…å¨åš´' },
                        { name: 'é•·é ¸é¹¿', emoji: 'ğŸ¦’', power: 6, type: 'è‰é£Ÿ', weakness: 'ç…å­', special: 'é•·é ¸å„ªå‹¢' },
                        { name: 'è›‡', emoji: 'ğŸ', power: 5, type: 'è‚‰é£Ÿ', weakness: 'è€é·¹', special: 'æ¯’æ¶²æ”»æ“Š' },
                        { name: 'è€é¼ ', emoji: 'ğŸ­', power: 3, type: 'é›œé£Ÿ', weakness: 'è›‡', special: 'å¿«é€Ÿé€ƒè„«' },
                        { name: 'è€é·¹', emoji: 'ğŸ¦…', power: 7, type: 'è‚‰é£Ÿ', weakness: 'ç„¡', special: 'ç©ºä¸­å„ªå‹¢' },
                        { name: 'ç‹¼', emoji: 'ğŸº', power: 6, type: 'è‚‰é£Ÿ', weakness: 'è€è™', special: 'ç¾¤é«”æˆ°è¡“' },
                        { name: 'é¹¿', emoji: 'ğŸ¦Œ', power: 5, type: 'è‰é£Ÿ', weakness: 'ç‹¼', special: 'æ•æ·è·³èº' },
                        { name: 'ç‹ç‹¸', emoji: 'ğŸ¦Š', power: 4, type: 'è‚‰é£Ÿ', weakness: 'ç‹¼', special: 'ç‹¡çŒ¾è¨ˆè¬€' },
                        { name: 'å…”å­', emoji: 'ğŸ°', power: 3, type: 'è‰é£Ÿ', weakness: 'ç‹ç‹¸', special: 'å¿«é€Ÿç¹æ®–' },
                        { name: 'è€è™', emoji: 'ğŸ¯', power: 9, type: 'è‚‰é£Ÿ', weakness: 'ç„¡', special: 'è™å˜¯éœ‡æ‡¾' },
                        { name: 'ç†Š', emoji: 'ğŸ»', power: 7, type: 'é›œé£Ÿ', weakness: 'ç„¡', special: 'å·¨åŠ›æ‹æ“Š' },
                        { name: 'é­š', emoji: 'ğŸŸ', power: 3, type: 'è‚‰é£Ÿ', weakness: 'é¯Šé­š', special: 'æ°´ä¸­æ¸¸å‹•' },
                        { name: 'é¯Šé­š', emoji: 'ğŸ¦ˆ', power: 8, type: 'è‚‰é£Ÿ', weakness: 'ç„¡', special: 'æ·±æµ·çµæ‰‹' },
                        { name: 'è²“é ­é·¹', emoji: 'ğŸ¦‰', power: 6, type: 'è‚‰é£Ÿ', weakness: 'ç„¡', special: 'å¤œè¦–èƒ½åŠ›' },
                        { name: 'è‰', emoji: 'ğŸŒ¿', power: 1, type: 'æ¤ç‰©', weakness: 'è‰é£Ÿå‹•ç‰©', special: 'å…‰åˆä½œç”¨' }
                    ];
                    
                    this.deck = [];
                    // æ¯ç¨®å‹•ç‰©4å¼µç‰Œï¼Œç¢ºä¿æœ‰è¶³å¤ çš„ç‰Œçµ„æ”¯æŒäº”å€‹å›åˆ
                    for (let animal of animals) {
                        for (let i = 0; i < 4; i++) {
                            this.deck.push({...animal});
                        }
                    }
                    
                    console.log(`ç‰Œçµ„å‰µå»ºå®Œæˆï¼Œç¸½å…± ${this.deck.length} å¼µç‰Œ`);
                },

                shuffleDeck() {
                    for (let i = this.deck.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];
                    }
                },

                dealCards() {
                    // ç¢ºä¿æœ‰è¶³å¤ çš„ç‰Œç™¼çµ¦é›™æ–¹
                    if (this.deck.length < 10) {
                        console.log('ç‰Œçµ„ä¸è¶³ï¼Œé‡æ–°æ´—ç‰Œ');
                        this.reshuffleDeck();
                    }
                    
                    this.playerHand = this.deck.slice(0, 5);
                    this.opponentHand = this.deck.slice(5, 10);
                    this.deck = this.deck.slice(10);
                    
                    console.log(`ç™¼ç‰Œå®Œæˆ - ç©å®¶: ${this.playerHand.length} å¼µï¼Œå°æ‰‹: ${this.opponentHand.length} å¼µï¼Œå‰©é¤˜ç‰Œçµ„: ${this.deck.length} å¼µ`);
                },

                selectCard(index) {
                    if (!this.gameOver && this.gameStarted) {
                        // éš¨æ™‚å¯ä»¥å‡ºç‰Œ
                        this.playCard(index);
                    }
                },

                playCard(index) {
                    if (index === null || this.gameOver || !this.gameStarted) {
                        return;
                    }

                    const card = this.playerHand[index];
                    this.battlefield.push({
                        ...card,
                        player: 'player',
                        winner: false,
                        damage: false
                    });

                    this.playerHand.splice(index, 1);
                    this.selectedCard = null;

                    // æ’­æ”¾å‡ºç‰ŒéŸ³æ•ˆ
                    this.playSound('cardPlay');

                    // æ˜Ÿæ˜Ÿäº’å‹•æ•ˆæœ
                    this.triggerStarsEffect('interactive');

                    // å°æ‰‹AIåŒæ™‚å‡ºç‰Œ
                    this.opponentPlayCard();

                    // æª¢æŸ¥æˆ°å ´å‹è² 
                    this.checkBattlefield();
                    
                    // ç§»é™¤è‡ªå‹•ä¸‹ä¸€å›åˆæª¢æŸ¥ï¼Œè®“ç©å®¶è‡ªå·±æ§åˆ¶
                },

                // ç©å®¶å›åˆé–‹å§‹æ™‚ï¼ŒAIè‡ªå‹•å‡ºç‰Œ
                startPlayerTurn() {
                    // ç§»é™¤AIè‡ªå‹•å‡ºç‰Œï¼Œè®“ç©å®¶å…ˆå‡ºç‰Œ
                },

                opponentPlayCard() {
                    if (this.opponentHand.length === 0) {
                        console.log('å°æ‰‹æ²’æœ‰æ‰‹ç‰Œï¼Œè·³éå‡ºç‰Œ');
                        return;
                    }

                    // å¤§å¹…é™ä½AIæ™ºèƒ½ï¼Œå¢åŠ éš¨æ©Ÿæ€§
                    let selectedCardIndex;
                    
                    // 70%æ©Ÿç‡éš¨æ©Ÿé¸æ“‡ï¼Œ30%æ©Ÿç‡é¸æ“‡è¼ƒå¥½çš„å¡ç‰Œ
                    if (Math.random() < 0.7) {
                        selectedCardIndex = Math.floor(Math.random() * this.opponentHand.length);
                        console.log('AIéš¨æ©Ÿé¸æ“‡å¡ç‰Œ');
                    } else {
                        // ç°¡åŒ–çš„æœ€ä½³å¡ç‰Œé¸æ“‡
                        let bestCardIndex = 0;
                        let bestScore = this.evaluateCard(this.opponentHand[0]);

                        for (let i = 1; i < this.opponentHand.length; i++) {
                            const score = this.evaluateCard(this.opponentHand[i]);
                            if (score > bestScore) {
                                bestScore = score;
                                bestCardIndex = i;
                            }
                        }
                        selectedCardIndex = bestCardIndex;
                        console.log('AIé¸æ“‡è¼ƒå¥½çš„å¡ç‰Œ');
                    }

                    const card = this.opponentHand[selectedCardIndex];
                    this.battlefield.push({
                        ...card,
                        player: 'opponent',
                        winner: false,
                        damage: false
                    });

                    this.opponentHand.splice(selectedCardIndex, 1);
                    
                    console.log(`å°æ‰‹å‡ºç‰Œ: ${card.name}ï¼Œå‰©é¤˜æ‰‹ç‰Œ: ${this.opponentHand.length} å¼µ`);
                    
                    // æ’­æ”¾AIå‡ºç‰ŒéŸ³æ•ˆ
                    setTimeout(() => this.playSound('cardPlay'), 200);
                    
                    // ç§»é™¤é€£çºŒå‡ºç‰Œé‚è¼¯ï¼Œä¸€æ¬¡åªå‡ºä¸€å¼µ
                },

                evaluateCard(card) {
                    let score = card.power;
                    
                    // å¤§å¹…é™ä½AIçš„æˆ°ç•¥æ€è€ƒ
                    // æª¢æŸ¥æ˜¯å¦æœ‰ç›¸å…‹é—œä¿‚ï¼Œä½†æ¬Šé‡é™ä½
                    const playerCard = this.battlefield[this.battlefield.length - 1];
                    if (this.isPredator(card.name, playerCard.name)) {
                        score += 2; // ç›¸å…‹åŠ åˆ†ï¼ˆå¤§å¹…é™ä½ï¼‰
                    } else if (this.isPredator(playerCard.name, card.name)) {
                        score -= 1; // è¢«å…‹æ¸›åˆ†ï¼ˆå¤§å¹…é™ä½ï¼‰
                    }
                    
                    // é™ä½ç‰¹æ®ŠæŠ€èƒ½çš„æ¬Šé‡
                    if (this.opponentHealth < 8 && card.special) {
                        score += 1; // ä½è¡€é‡æ™‚ç‰¹æ®ŠæŠ€èƒ½åŠ åˆ†ï¼ˆå¤§å¹…é™ä½ï¼‰
                    }
                    
                    // å¤§å¹…å¢åŠ éš¨æ©Ÿæ€§ï¼Œè®“AIæ›´ä¸ç©©å®š
                    score += Math.random() * 6 - 3; // éš¨æ©ŸåŠ æ¸›3åˆ†
                    
                    // æœ‰æ™‚å€™AIæœƒæ•…æ„é¸æ“‡è¼ƒå·®çš„å¡ç‰Œ
                    if (Math.random() < 0.3) {
                        score -= 5; // 30%æ©Ÿç‡æ•…æ„é¸æ“‡è¼ƒå·®çš„å¡ç‰Œ
                    }
                    
                    return score;
                },

                isPredator(predator, prey) {
                    return this.foodChain[predator] && this.foodChain[predator].includes(prey);
                },

                checkBattlefield() {
                    if (this.battlefield.length >= 2) {
                        const playerCard = this.battlefield[this.battlefield.length - 2];
                        const opponentCard = this.battlefield[this.battlefield.length - 1];

                        let playerPower = playerCard.power;
                        let opponentPower = opponentCard.power;

                        // æª¢æŸ¥ç›¸å…‹é—œä¿‚
                        if (this.isPredator(playerCard.name, opponentCard.name)) {
                            playerPower *= 2;
                            this.gameMessage = `${playerCard.name} å…‹åˆ¶ ${opponentCard.name}ï¼æ”»æ“ŠåŠ›ç¿»å€ï¼`;
                        } else if (this.isPredator(opponentCard.name, playerCard.name)) {
                            opponentPower *= 2;
                            this.gameMessage = `${opponentCard.name} å…‹åˆ¶ ${playerCard.name}ï¼æ”»æ“ŠåŠ›ç¿»å€ï¼`;
                        } else {
                            this.gameMessage = 'é›™æ–¹å‹¢å‡åŠ›æ•µï¼';
                        }

                        // è™•ç†ç‰¹æ®ŠæŠ€èƒ½
                        this.processSpecialEffects(playerCard, 'player');
                        this.processSpecialEffects(opponentCard, 'opponent');

                        if (playerPower > opponentPower) {
                            // ç©å®¶å‹åˆ©
                            const damage = Math.max(1, Math.floor((playerPower - opponentPower) / 2));
                            this.opponentHealth -= damage;
                            this.gameMessage += ` ç©å®¶å‹åˆ©ï¼å°æ‰‹å—åˆ°${damage}é»å‚·å®³`;
                            this.showDamageEffect('opponent');
                            playerCard.winner = true;
                            this.playSound('victory');
                            this.playSound('damage');
                            this.triggerStarsEffect('victory');
                            
                            // ç§»é™¤æˆ°é¬¥ä¸­çš„æ˜Ÿæ˜Ÿçå‹µï¼Œåªåœ¨éŠæˆ²çµæŸæ™‚çµ¦ä¸€æ¬¡æ€§çå‹µ
                            // const starsEarned = Math.max(2, Math.floor(damage / 1.5));
                            // this.addStars(starsEarned);
                            // this.gameMessage += ` ç²å¾—${starsEarned}é¡†æ˜Ÿæ˜Ÿï¼`;
                            // æ˜Ÿæ˜Ÿçå‹µå½ˆçª—æœƒåœ¨ addStars æ–¹æ³•ä¸­è‡ªå‹•é¡¯ç¤º
                        } else if (opponentPower > playerPower) {
                            // å°æ‰‹å‹åˆ©
                            const damage = Math.max(1, Math.floor((opponentPower - playerPower) / 2));
                            this.playerHealth -= damage;
                            this.gameMessage += ` å°æ‰‹å‹åˆ©ï¼ç©å®¶å—åˆ°${damage}é»å‚·å®³`;
                            this.showDamageEffect('player');
                            opponentCard.winner = true;
                            this.playSound('damage');
                            this.triggerStarsEffect('damage');
                        } else {
                            // å¹³æ‰‹
                            this.gameMessage += ' å¹³æ‰‹ï¼é›™æ–¹éƒ½æ²’æœ‰å—åˆ°å‚·å®³';
                            // ç§»é™¤å¹³æ‰‹æ™‚çš„æ˜Ÿæ˜Ÿçå‹µï¼Œåªåœ¨éŠæˆ²çµæŸæ™‚çµ¦ä¸€æ¬¡æ€§çå‹µ
                            // this.addStars(1);
                            // this.gameMessage += ' å¹³æ‰‹çå‹µ1é¡†æ˜Ÿæ˜Ÿï¼';
                        }

                        // æª¢æŸ¥éŠæˆ²çµæŸ
                        this.checkGameOver();
                        
                        // å»¶é²æ¸…é™¤æˆ°å ´
                        setTimeout(() => {
                            this.battlefield = [];
                            // ç§»é™¤è‡ªå‹•ä¸‹ä¸€å›åˆæª¢æŸ¥ï¼Œè®“ç©å®¶è‡ªå·±æ§åˆ¶
                        }, 5000); // å¢åŠ åˆ°5ç§’ï¼Œè®“ç©å®¶æœ‰æ›´å¤šæ™‚é–“è§€å¯Ÿæˆ°é¬¥çµæœ
                    }
                },



                processSpecialEffects(card, player) {
                    if (!card.special) return;

                    switch (card.special) {
                        case 'ç‹è€…å¨åš´':
                            if (player === 'player') {
                                this.playerHealth = Math.min(25, this.playerHealth + 2);
                                this.gameMessage += ' ç©å®¶æ¢å¾©2é»ç”Ÿå‘½ï¼';
                                this.playSound('heal');
                            } else {
                                this.opponentHealth = Math.min(25, this.opponentHealth + 2);
                                this.gameMessage += ' å°æ‰‹æ¢å¾©2é»ç”Ÿå‘½ï¼';
                            }
                            break;
                        case 'æ¯’æ¶²æ”»æ“Š':
                            if (player === 'player') {
                                this.opponentHealth -= 1;
                                this.gameMessage += ' ç©å®¶é¡å¤–é€ æˆ1é»æ¯’æ¶²å‚·å®³ï¼';
                                this.playSound('damage');
                            } else {
                                this.playerHealth -= 1;
                                this.gameMessage += ' å°æ‰‹é¡å¤–é€ æˆ1é»æ¯’æ¶²å‚·å®³ï¼';
                            }
                            break;
                        case 'å¿«é€Ÿé€ƒè„«':
                            // ç§»é™¤å¤šæŠ½ä¸€å¼µæ•ˆæœï¼Œæ”¹ç‚ºç°¡å–®çš„é–ƒé¿æ•ˆæœ
                            this.gameMessage += ' å¿«é€Ÿé€ƒè„«ï¼æ²’æœ‰é¡å¤–æ•ˆæœ';
                            break;
                        case 'è™å˜¯éœ‡æ‡¾':
                            if (player === 'player') {
                                this.opponentHealth -= 2;
                                this.gameMessage += ' ç©å®¶é€ æˆ2é»éœ‡æ‡¾å‚·å®³ï¼';
                                this.playSound('damage');
                            } else {
                                this.playerHealth -= 2;
                                this.gameMessage += ' å°æ‰‹é€ æˆ2é»éœ‡æ‡¾å‚·å®³ï¼';
                            }
                            break;
                    }
                },

                showDamageEffect(target) {
                    const cards = target === 'player' ? this.playerHand : this.opponentHand;
                    cards.forEach(card => {
                        card.damage = true;
                        setTimeout(() => {
                            card.damage = false;
                        }, 500);
                    });
                },

                useSpecialSkill() {
                    if (!this.gameStarted) {
                        this.gameMessage = 'è«‹å…ˆé–‹å§‹éŠæˆ²ï¼';
                        return;
                    }
                    
                    if (this.playerEnergy < 3) return;

                    this.playerEnergy -= 3;
                    this.showEffects = true;
                    this.playSound('special');

                    // æ˜Ÿæ˜Ÿäº’å‹•æ•ˆæœ
                    this.triggerStarsEffect('interactive');

                    // éš¨æ©Ÿç‰¹æ®Šæ•ˆæœ
                    const effects = [
                        () => { 
                            this.playerHealth = Math.min(25, this.playerHealth + 5); 
                            this.gameMessage = 'ç©å®¶ä½¿ç”¨æ²»ç™’æŠ€èƒ½ï¼æ¢å¾©5é»ç”Ÿå‘½ï¼'; 
                            this.playSound('heal');
                            // ç§»é™¤ç‰¹æ®ŠæŠ€èƒ½ä¸­çš„æ˜Ÿæ˜Ÿçå‹µï¼Œåªåœ¨éŠæˆ²çµæŸæ™‚çµ¦ä¸€æ¬¡æ€§çå‹µ
                            // this.addStars(3); // æ²»ç™’æŠ€èƒ½çå‹µ3é¡†æ˜Ÿæ˜Ÿï¼ˆå¢åŠ ï¼‰
                            // æ˜Ÿæ˜Ÿçå‹µå½ˆçª—æœƒåœ¨ addStars æ–¹æ³•ä¸­è‡ªå‹•é¡¯ç¤º
                        },
                        () => { 
                            this.opponentHealth -= 3; 
                            this.gameMessage = 'ç©å®¶ä½¿ç”¨æ”»æ“ŠæŠ€èƒ½ï¼å°æ‰‹å—åˆ°3é»å‚·å®³ï¼'; 
                            this.playSound('damage');
                            // ç§»é™¤ç‰¹æ®ŠæŠ€èƒ½ä¸­çš„æ˜Ÿæ˜Ÿçå‹µï¼Œåªåœ¨éŠæˆ²çµæŸæ™‚çµ¦ä¸€æ¬¡æ€§çå‹µ
                            // this.addStars(4); // æ”»æ“ŠæŠ€èƒ½çå‹µ4é¡†æ˜Ÿæ˜Ÿï¼ˆå¢åŠ ï¼‰
                            // æ˜Ÿæ˜Ÿçå‹µå½ˆçª—æœƒåœ¨ addStars æ–¹æ³•ä¸­è‡ªå‹•é¡¯ç¤º
                        },
                        () => { 
                            this.gameMessage = 'ç©å®¶ä½¿ç”¨æŠ½ç‰ŒæŠ€èƒ½ï¼ä½†æ²’æœ‰é¡å¤–æ•ˆæœ'; 
                            this.playSound('shuffle');
                            // ç§»é™¤ç‰¹æ®ŠæŠ€èƒ½ä¸­çš„æ˜Ÿæ˜Ÿçå‹µï¼Œåªåœ¨éŠæˆ²çµæŸæ™‚çµ¦ä¸€æ¬¡æ€§çå‹µ
                            // this.addStars(2); // æŠ½ç‰ŒæŠ€èƒ½çå‹µ2é¡†æ˜Ÿæ˜Ÿï¼ˆå¢åŠ ï¼‰
                            // æ˜Ÿæ˜Ÿçå‹µå½ˆçª—æœƒåœ¨ addStars æ–¹æ³•ä¸­è‡ªå‹•é¡¯ç¤º
                        },
                        () => {
                            this.gameMessage = 'ç©å®¶ä½¿ç”¨å¬å–šæŠ€èƒ½ï¼ä½†æ²’æœ‰é¡å¤–æ•ˆæœ';
                            this.playSound('victory');
                            // ç§»é™¤ç‰¹æ®ŠæŠ€èƒ½ä¸­çš„æ˜Ÿæ˜Ÿçå‹µï¼Œåªåœ¨éŠæˆ²çµæŸæ™‚çµ¦ä¸€æ¬¡æ€§çå‹µ
                            // this.addStars(5); // å¬å–šæŠ€èƒ½çå‹µ5é¡†æ˜Ÿæ˜Ÿï¼ˆå¢åŠ ï¼‰
                            // æ˜Ÿæ˜Ÿçå‹µå½ˆçª—æœƒåœ¨ addStars æ–¹æ³•ä¸­è‡ªå‹•é¡¯ç¤º
                        }
                    ];

                    const randomEffect = effects[Math.floor(Math.random() * effects.length)];
                    randomEffect();

                    setTimeout(() => {
                        this.showEffects = false;
                    }, 2000);
                },

                endTurn() {
                    if (!this.gameStarted) {
                        this.gameMessage = 'è«‹å…ˆé–‹å§‹éŠæˆ²ï¼';
                        return;
                    }
                    
                    // æª¢æŸ¥æ˜¯å¦é‚„æœ‰æ‰‹ç‰Œ
                    if (this.playerHand.length > 0) {
                        this.gameMessage = 'è«‹å…ˆå‡ºå®Œæ‰€æœ‰æ‰‹ç‰Œï¼';
                        return;
                    }
                    
                    this.turn++;
                    
                    // æª¢æŸ¥æ˜¯å¦é”åˆ°ç¬¬äº”å›åˆ
                    if (this.turn > 5) {
                        this.gameMessage = 'éŠæˆ²å·²é”åˆ°ç¬¬äº”å›åˆä¸Šé™ï¼';
                        this.checkGameOver();
                        return;
                    }
                    
                    // è£œå……æ‰‹ç‰Œå’Œèƒ½é‡
                    this.drawCards();
                    this.playerEnergy = Math.min(10, this.playerEnergy + 2);
                    
                    this.gameMessage = `å›åˆ ${this.turn} - æ‰‹ç‰Œå·²è£œå……`;
                    this.playSound('button');
                    
                    // é¡¯ç¤ºç•¶å‰æ‰‹ç‰Œæ•¸é‡
                    console.log(`å›åˆ ${this.turn}: ç©å®¶æ‰‹ç‰Œ ${this.playerHand.length} å¼µï¼Œå°æ‰‹æ‰‹ç‰Œ ${this.opponentHand.length} å¼µ`);
                },

                drawCards() {
                    // ç©å®¶æŠ½ç‰Œ
                    while (this.playerHand.length < 5 && this.deck.length > 0) {
                        this.playerHand.push(this.deck.shift());
                    }

                    // å°æ‰‹æŠ½ç‰Œ
                    while (this.opponentHand.length < 5 && this.deck.length > 0) {
                        this.opponentHand.push(this.deck.shift());
                    }
                    
                    // å¦‚æœç‰Œçµ„ç”¨å®Œï¼Œé‡æ–°æ´—ç‰Œä¸¦è£œå……
                    if (this.deck.length === 0) {
                        this.reshuffleDeck();
                    }
                },

                reshuffleDeck() {
                    // é‡æ–°å‰µå»ºç‰Œçµ„
                    this.createDeck();
                    this.shuffleDeck();
                    console.log('ç‰Œçµ„å·²é‡æ–°æ´—ç‰Œï¼Œå‰©é¤˜ç‰Œæ•¸:', this.deck.length);
                },

                checkGameOver() {
                    if (this.playerHealth <= 0) {
                        this.gameOver = true;
                        this.gameOverMessage = 'éŠæˆ²çµæŸï¼å°æ‰‹ç²å‹ï¼';
                        if (!this.gameRewarded) {
                            this.addStars(-2); // å¤±æ•—æ‰£é™¤2é¡†æ˜Ÿæ˜Ÿ
                            this.gameMessage += ' å¤±æ•—æ‰£é™¤2é¡†æ˜Ÿæ˜Ÿï¼';
                            this.gameRewarded = true;
                        }
                        this.playSound('gameOver');
                        // ç«‹å³æ¸…ç©ºç‰Œé¢
                        this.clearAllCards();
                    } else if (this.opponentHealth <= 0) {
                        this.gameOver = true;
                        this.gameOverMessage = 'éŠæˆ²çµæŸï¼ç©å®¶ç²å‹ï¼';
                        this.playSound('victory');
                        // å‹åˆ©çå‹µ20é¡†æ˜Ÿæ˜Ÿï¼ˆé˜²æ­¢é‡è¤‡çå‹µï¼‰
                        if (!this.gameRewarded) {
                            this.addStars(20);
                            this.gameMessage += ` å‹åˆ©çå‹µ20é¡†æ˜Ÿæ˜Ÿï¼`;
                            this.gameRewarded = true;
                            // æ˜Ÿæ˜Ÿçå‹µå½ˆçª—æœƒåœ¨ addStars æ–¹æ³•ä¸­è‡ªå‹•é¡¯ç¤º
                        }
                        // ç«‹å³æ¸…ç©ºç‰Œé¢
                        this.clearAllCards();
                    } else if (this.turn >= 5 && this.playerHand.length === 0 && this.opponentHand.length === 0) {
                        // ç¬¬äº”å›åˆçµæŸä¸”é›™æ–¹éƒ½æ²’æœ‰æ‰‹ç‰Œï¼Œæ¯”è¼ƒè¡€é‡æ±ºå®šå‹è² 
                        this.gameOver = true;
                        if (this.playerHealth > this.opponentHealth) {
                            this.gameOverMessage = 'ç¬¬äº”å›åˆçµæŸï¼ç©å®¶è¡€é‡è¼ƒå¤šç²å‹ï¼';
                            this.playSound('victory');
                            // å‹åˆ©çå‹µ20é¡†æ˜Ÿæ˜Ÿï¼ˆé˜²æ­¢é‡è¤‡çå‹µï¼‰
                            if (!this.gameRewarded) {
                                this.addStars(20);
                                this.gameMessage += ` å‹åˆ©çå‹µ20é¡†æ˜Ÿæ˜Ÿï¼`;
                                this.gameRewarded = true;
                                // æ˜Ÿæ˜Ÿçå‹µå½ˆçª—æœƒåœ¨ addStars æ–¹æ³•ä¸­è‡ªå‹•é¡¯ç¤º
                            }
                        } else if (this.opponentHealth > this.playerHealth) {
                            this.gameOverMessage = 'ç¬¬äº”å›åˆçµæŸï¼å°æ‰‹è¡€é‡è¼ƒå¤šç²å‹ï¼';
                            if (!this.gameRewarded) {
                                this.addStars(-2); // å¤±æ•—æ‰£é™¤2é¡†æ˜Ÿæ˜Ÿ
                                this.gameMessage += ' å¤±æ•—æ‰£é™¤2é¡†æ˜Ÿæ˜Ÿï¼';
                                this.gameRewarded = true;
                            }
                            this.playSound('gameOver');
                        } else {
                            this.gameOverMessage = 'ç¬¬äº”å›åˆçµæŸï¼å¹³æ‰‹ï¼';
                            if (!this.gameRewarded) {
                                this.addStars(5); // å¹³æ‰‹çå‹µ5é¡†æ˜Ÿæ˜Ÿ
                                this.gameMessage += ' å¹³æ‰‹çå‹µ5é¡†æ˜Ÿæ˜Ÿï¼';
                                this.gameRewarded = true;
                                // æ˜Ÿæ˜Ÿçå‹µå½ˆçª—æœƒåœ¨ addStars æ–¹æ³•ä¸­è‡ªå‹•é¡¯ç¤º
                            }
                        }
                        // ç«‹å³æ¸…ç©ºç‰Œé¢
                        this.clearAllCards();
                    } else if (this.deck.length === 0 && this.playerHand.length === 0 && this.opponentHand.length === 0) {
                        // ç‰Œçµ„ç”¨å®Œä¸”é›™æ–¹éƒ½æ²’æœ‰æ‰‹ç‰Œçš„æƒ…æ³
                        this.gameOver = true;
                        if (this.playerHealth > this.opponentHealth) {
                            this.gameOverMessage = 'éŠæˆ²çµæŸï¼ç©å®¶ç²å‹ï¼';
                            this.playSound('victory');
                            // å‹åˆ©çå‹µ20é¡†æ˜Ÿæ˜Ÿï¼ˆé˜²æ­¢é‡è¤‡çå‹µï¼‰
                            if (!this.gameRewarded) {
                                this.addStars(20);
                                this.gameMessage += ` å‹åˆ©çå‹µ20é¡†æ˜Ÿæ˜Ÿï¼`;
                                this.gameRewarded = true;
                                // æ˜Ÿæ˜Ÿçå‹µå½ˆçª—æœƒåœ¨ addStars æ–¹æ³•ä¸­è‡ªå‹•é¡¯ç¤º
                            }
                        } else if (this.opponentHealth > this.playerHealth) {
                            this.gameOverMessage = 'éŠæˆ²çµæŸï¼å°æ‰‹ç²å‹ï¼';
                            if (!this.gameRewarded) {
                                this.addStars(-2); // å¤±æ•—æ‰£é™¤2é¡†æ˜Ÿæ˜Ÿ
                                this.gameMessage += ' å¤±æ•—æ‰£é™¤2é¡†æ˜Ÿæ˜Ÿï¼';
                                this.gameRewarded = true;
                            }
                            this.playSound('gameOver');
                        } else {
                            this.gameOverMessage = 'éŠæˆ²çµæŸï¼å¹³æ‰‹ï¼';
                            if (!this.gameRewarded) {
                                this.addStars(5); // å¹³æ‰‹çå‹µ5é¡†æ˜Ÿæ˜Ÿ
                                this.gameMessage += ' å¹³æ‰‹çå‹µ5é¡†æ˜Ÿæ˜Ÿï¼';
                                this.gameRewarded = true;
                                // æ˜Ÿæ˜Ÿçå‹µå½ˆçª—æœƒåœ¨ addStars æ–¹æ³•ä¸­è‡ªå‹•é¡¯ç¤º
                            }
                        }
                        // ç«‹å³æ¸…ç©ºç‰Œé¢
                        this.clearAllCards();
                    }
                },

                clearAllCards() {
                    // ç«‹å³æ¸…ç©ºæ‰€æœ‰ç‰Œé¢
                    this.playerHand = [];
                    this.opponentHand = [];
                    this.battlefield = [];
                    this.selectedCard = null;
                    console.log('éŠæˆ²çµæŸï¼Œæ‰€æœ‰ç‰Œé¢å·²æ¸…ç©º');
                },

                newGame() {
                    // é‡ç½®éŠæˆ²ç‹€æ…‹
                    this.playerHealth = 25;
                    this.opponentHealth = 20; // é™ä½å°æ‰‹åˆå§‹è¡€é‡
                    this.playerEnergy = 5;
                    this.turn = 1;
                    this.playerHand = [];
                    this.opponentHand = [];
                    this.battlefield = [];
                    this.selectedCard = null;
                    this.gameMessage = 'è«‹é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•é–‹å§‹æ–°éŠæˆ²ï¼';
                    this.gameOver = false;
                    this.gameOverMessage = '';
                    this.currentPlayer = 'player';
                    this.showEffects = false;
                    this.gameStarted = false; // é‡ç½®éŠæˆ²é–‹å§‹ç‹€æ…‹
                    this.gameRewarded = false; // é‡ç½®çå‹µæ¨™è¨˜
                    this.playSound('button');
                }
            }
        }).mount('#app');
    </script>
</body>
</html> 
